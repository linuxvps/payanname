"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4585],{78052:function(e,t,a){a.d(t,{Z:function(){return Y}});var n=a(99734),r=a(73397),i=a(51358),l=a(93237),o=a(18151),s=a(41705),c=a(96279),d=a(23621),u=a(90214),m=a(48510),h=a(75575),p=a(5389),f=a(26761),g=a(60266),v=a(24737),x=a(35944),b=a(67294),w=a(94405),y=e=>{let t={...e.node.attrs},[a,n]=(0,b.useState)(!1),[r,i]=(0,b.useState)(t.height),l=e.editor.isActive("slideImage"),o=t=>{e.updateAttributes({height:t.toString()}),i(t)};return(0,x.BX)(g.T5,{className:"relative flex flex-col items-center",children:[r&&l&&!a&&(0,x.tZ)(w.Z,{maxValue:v.jR,value:r,onUpdateValue:o}),(0,x.tZ)("div",{style:r?{height:"".concat(r,"px")}:{},children:(0,x.tZ)("img",{className:"h-full max-w-full object-contain",src:a?"/vs/failed-image-placeholder.png":t.src,onError:()=>n(!0),alt:t.alt||"figure image",style:{height:"100%"},onClick:()=>{"function"==typeof e.getPos&&e.editor.commands.focus(e.getPos()+1)},onLoad:e=>o(e.target.height)})}),(0,x.tZ)(g.ms,{})]})};let Z=f.ZP.extend({name:"slideImage",content:"block*",addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}),parseHTML:()=>[{tag:"slideImage"}],renderHTML(e){let{HTMLAttributes:t,node:a}=e;return["div",{class:"flex relative flex-col items-center"},["div",{style:a.attrs.height?"height: ".concat(a.attrs.height,"px"):""},["img",{class:"max-w-full h-full object-contain",src:a.attrs.src,alt:a.attrs.alt,style:"max-height: ".concat(v.jR,"px")}]],["div",{},0]]},addNodeView:()=>(0,g.fW)(y)});var N=a(5865),A=a(68779),P=a(67814),S=e=>{let{node:t}=e,a=!t.textContent.length;return(0,x.BX)(g.T5,{className:"overflow-auto rounded bg-white",style:{width:v.AO,height:v.ps},children:[(0,x.BX)("div",{className:"sticky top-0 z-1 flex items-center gap-2 border-b bg-white pl-6",contentEditable:!1,children:[(0,x.tZ)(P.G,{icon:A.UOM}),(0,x.tZ)("div",{className:"my-2 text-sm  font-semibold",children:"Speaker Notes"})]}),(0,x.tZ)(g.ms,{as:"div",className:"relative p-6",children:a&&(0,x.tZ)("div",{contentEditable:!1,className:"pointer-events-none absolute top-6 select-none text-neutral-400",children:"Enter keynotes"})})]})};let k=["svg",{viewBox:"0 0 384 512",width:14},["path",{d:"M192 0C139 0 96 43 96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 70.7-57.3 128-128 128s-128-57.3-128-128V216z"}]],L=["div",{class:" font-semibold"},"Speaker notes"],B=["div",{},["div",{class:"pt-2 text-neutral-900"},"Speaker notes not available."],["div",{class:"text-neutral-600"},"Add a custom note by clicking Edit"]],C=N.NB.create({name:"keynotes",content:"slideParagraph+",group:"block",atom:!0,isolating:!0,defining:!0,parseHTML:()=>[{tag:"keynotes"}],renderHTML(e){let{HTMLAttributes:t,node:a}=e,n=a.textContent;return["div",(0,N.P1)(t,{class:"overflow-auto hidden md:block rounded bg-white",style:"width: ".concat(v.AO,"px; height: ").concat(v.ps,"px;")}),["div",{class:"px-6 py-2 flex gap-2 absolute bg-white top-0",style:"width: ".concat(v.AO,"px")},k,L],["div",{class:"p-6 pt-10"},n?0:B]]},addNodeView:()=>(0,g.fW)(S)});var T=a(73582);let H=[{name:"ai",title:"AI option",commands:[{name:"scispaceAI",label:"AI Writer",icon:(0,x.tZ)(P.G,{icon:T.JyM,className:"mr-0.5 text-secondary-500"}),description:"Let AI finish your thoughts",shouldBeHidden:e=>e.isActive("columns"),action:e=>e.chain().focus().showAiGeneration().focus().run()}]},{name:"format",title:"Text formatting",commands:[{name:"heading1",label:"Heading 1",icon:(0,x.tZ)(P.G,{className:"mr-0.5 text-neutral-600",icon:A.kVJ}),description:"High priority section title",aliases:["h1"],action:e=>{e.chain().focus().setHeading({level:1}).run()}},{name:"heading2",label:"Heading 2",icon:(0,x.tZ)(P.G,{className:"mr-0.5 text-neutral-600",icon:A.ejo}),description:"Medium priority section title",aliases:["h2"],action:e=>{e.chain().focus().setHeading({level:2}).run()}},{name:"heading3",label:"Heading 3",icon:(0,x.tZ)(P.G,{className:"mr-0.5 text-neutral-600",icon:A.WTH}),description:"Low priority section title",aliases:["h3"],action:e=>{e.chain().focus().setHeading({level:3}).run()}},{name:"bulletList",label:"Bullet List",icon:(0,x.tZ)(P.G,{className:"mr-0.5 text-neutral-600",icon:A.Zrf}),description:"Unordered list of items",aliases:["ul"],action:e=>{e.chain().focus().toggleBulletList().run()}},{name:"numberedList",label:"Numbered List",icon:(0,x.tZ)(P.G,{className:"mr-0.5 text-neutral-600",icon:A.nFo}),description:"Ordered list of items",aliases:["ol"],action:e=>{e.chain().focus().toggleOrderedList().run()}}]},{name:"insert",title:"Insert",commands:[{name:"table",label:"Table",icon:(0,x.tZ)(P.G,{className:"mr-0.5 text-neutral-600",icon:A.B3e}),description:"Insert a table",shouldBeHidden:e=>e.isActive("table"),action:e=>{e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!1}).run()}},{name:"horizontalRule",label:"Horizontal Rule",icon:(0,x.tZ)(P.G,{className:"mr-0.5 text-neutral-600",icon:A.ZC5}),description:"Insert a horizontal divider",aliases:["hr"],action:e=>{e.chain().focus().setHorizontalRule().run()}}]}];var I=a(13458),_=a(63777),E=e=>{let{changeSlide:t,exitFullScreen:a,currentSlideIndex:n,totalSlides:r}=e;return(0,x.BX)("div",{contentEditable:!1,className:"flex max-w-fit items-center justify-center gap-3",children:[(0,x.BX)("div",{className:"flex max-w-fit items-center justify-center gap-3 rounded-full bg-neutral-700 p-2",children:[(0,x.tZ)("div",{className:"cursor-pointer rounded-full px-2 py-1 text-white opacity-50 hover:bg-neutral-500 hover:opacity-100 ".concat(0===n?"pointer-events-none opacity-25":""),onClick:()=>t(-1),children:(0,x.tZ)(P.G,{icon:A.acZ})}),(0,x.BX)("span",{className:"pointer-events-none text-white",children:[n+1,"/ ",r]}),(0,x.tZ)("div",{className:"cursor-pointer rounded-full px-2 py-1 text-white opacity-50 hover:bg-neutral-500 hover:opacity-100  ".concat(n+1===r?"pointer-events-none opacity-25":""),onClick:()=>t(1),children:(0,x.tZ)(P.G,{icon:A.eFW})})]}),(0,x.tZ)("div",{className:"flex max-w-fit items-center justify-center gap-3 rounded-full bg-neutral-700 p-2",children:(0,x.BX)("div",{className:"flex cursor-pointer items-center gap-2 rounded-full px-2 py-1 text-white opacity-50 hover:bg-neutral-500 hover:opacity-100",onClick:a,children:[(0,x.tZ)(P.G,{icon:A.iK1}),(0,x.tZ)("p",{className:"m-0",children:"Exit"})]})})]})},M=e=>{var t,a;let n=null===(a=e.editor.getJSON())||void 0===a?void 0:null===(t=a.content)||void 0===t?void 0:t.length,r=e.node.attrs.order,i=async()=>{await document.exitFullscreen(),document.fullscreenElement&&i()};return(0,x.BX)(g.T5,{className:"group m-auto mb-12 fullscreen:scale-150 sm:block sm:scale-100","data-id":e.node.attrs.unique_id,"data-pageorder":r,"data-slide":!0,style:{width:v.Tw,transformOrigin:"left top"},children:[(0,x.tZ)(g.ms,{as:"div",className:"overflow-auto rounded-md border-b-6 border-secondary-500 bg-white p-12 hover:shadow-xl group-fullscreen:min-h-full",style:{height:v.ps+6}}),(0,x.tZ)("div",{className:"absolute bottom-3 right-6",children:(0,x.tZ)(I.Z,{className:" w-20"})}),(0,x.tZ)("div",{className:"fixed bottom-7 left-1/2 hidden -translate-x-1/2 gap-4 opacity-20 hover:opacity-100 group-fullscreen:flex",children:(0,x.tZ)(E,{changeSlide:e=>{(0,_.M)(r+e)},exitFullScreen:i,currentSlideIndex:r,totalSlides:n})})]})};let V=N.NB.create({name:"slide",content:"slideItem",group:"block",parseHTML:()=>[{tag:"slide"}],addAttributes:()=>({unique_id:{default:null},order:{default:0}}),renderHTML(e){let{HTMLAttributes:t,node:a}=e;return["div",(0,N.P1)(t,{class:"mb-12 relative sm:scale-100 border rounded-md sm:block m-auto group-fullscreen:w-screen group-fullscreen:h-screen",style:"width: ".concat(v.Tw,"px; transform-origin: left top "),"data-id":a.attrs.unique_id}),["div",{class:"rounded-md border-b-6 border-secondary-500 bg-white p-12  group-fullscreen:w-screen group-fullscreen:h-screen overflow-hidden",style:"height: ".concat(v.ps,"px")},0],["img",{src:"/vs/water-mark.png",alt:"scispace-watermark",className:"absolute right-6 bottom-3 w-20"}]]},addNodeView:()=>(0,g.fW)(M,{className:"max-w-screen "})}),O=a(30561).ZP.extend({name:"slideBullet",renderHTML(e){let{HTMLAttributes:t}=e;return["ul",(0,N.P1)(this.options.HTMLAttributes,{}),0]}}),U=a(20336).Z.extend({content:"slideWrapper*",addKeyboardShortcuts:()=>({"Mod-a":()=>!0}),onTransaction(e){let{transaction:t}=e;"paragraph"===t.selection.$anchor.parent.type.name&&this.editor.chain().insertContentAt(this.editor.state.selection.head,{type:"slideParagraph"}).focus().run()}}),G=a(7490).Z.extend({name:"slideHeading",renderHTML(e){let{node:t,HTMLAttributes:a}=e,n=this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0];return["h".concat(n),(0,N.P1)(this.options.HTMLAttributes,{...a,class:"m-0"}),0]}});var D=e=>(0,x.tZ)(g.T5,{children:(0,x.tZ)(g.ms,{as:"div",className:"flex flex-col ".concat("center"===e.node.attrs.layout?"justify-center":""),style:{minHeight:v.ps-96}})});let R=N.NB.create({name:"slideItem",content:"block*",group:"block",atom:!0,parseHTML:()=>[{tag:"slideItem"}],addAttributes:()=>({layout:{default:null}}),renderHTML(e){let{HTMLAttributes:t,node:a}=e;return["div",{},["div",{class:"flex flex-col ".concat("center"===a.attrs.layout?"justify-center":""),style:"min-height: ".concat(v.ps-96,"px")},0]]},addNodeView:()=>(0,g.fW)(D)}),X=a(34565).Z.extend({name:"listItem",content:"slideParagraph block*"});var W=a(25651),j=()=>(0,x.tZ)(g.T5,{children:(0,x.tZ)(g.ms,{as:"div",className:"slide-wrapper"})});let q=N.NB.create({name:"slideWrapper",content:"slide keynotes",group:"block",atom:!0,parseHTML:()=>[{tag:"slideWrapper"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",{class:"slide-wrapper"},["div",{},0]]},addNodeView:()=>(0,g.fW)(j,{})});var F=a(91512),z=a(65278),J=a(66074),K=a(57617),Y=()=>[U,p.Y1,h.V.configure({dropcursor:!1,heading:!1,horizontalRule:!1,blockquote:!1,listItem:!1,document:!1,history:!1,codeBlock:!1}),n.ZP.configure({HTMLAttributes:{class:"border-l-4 pl-4"}}),p.bo,p.iA,p.pj,p.xD,p.SC,d.p,p.Bf,m.v,c.P.extend({addKeyboardShortcuts:()=>({})}).configure({types:["slideHeading","slideParagraph"]}),p.rU.configure({openOnClick:!1}),p.dn,o.a,s.$,u.ZT,p.Ht.configure({limit:7e4}),l.V.configure({includeChildren:!0,showOnlyCurrent:!1,placeholder:()=>""}),p.vb.configure({groups:H}),i.F,r.m.configure({width:2,class:"ProseMirror-dropcursor border-black"}),G,V,R,O,X,Z,W.Z,q,C,J.u.configure({nodeList:["slideWrapper","slide","keynotes"]}),K.M,z.Z,F.Z,p.qW]},44913:function(e,t,a){a.d(t,{Z:function(){return Q}});var n=a(30561),r=a(73397),i=a(51358),l=a(34565),o=a(93237),s=a(18151),c=a(41705),d=a(96279),u=a(23621),m=a(90214),h=a(48510),p=a(5865),f=a(75575),g=a(5389),v=a(35944),x=a(68779),b=a(73582),w=a(67814);let y=[{name:"ai",title:"AI option",commands:[{name:"scispaceAI",label:"AI Writer",icon:(0,v.tZ)(w.G,{icon:b.JyM,className:"mr-0.5 text-secondary-500"}),description:"Let AI finish your thoughts",shouldBeHidden:e=>e.isActive("columns"),action:e=>e.chain().focus().showAiGeneration().focus().run()}]},{name:"format",title:"Text formatting",commands:[{name:"heading1",label:"Heading 1",icon:(0,v.tZ)(w.G,{className:"mr-0.5 text-neutral-600",icon:x.kVJ}),description:"High priority section title",aliases:["h1"],action:e=>{e.chain().focus().setHeading({level:1}).run()}},{name:"bulletList",label:"Bullet List",icon:(0,v.tZ)(w.G,{className:"mr-0.5 text-neutral-600",icon:x.Zrf}),description:"Unordered list of items",aliases:["ul"],action:e=>{e.chain().focus().toggleBulletList().run()}},{name:"numberedList",label:"Numbered List",icon:(0,v.tZ)(w.G,{className:"mr-0.5 text-neutral-600",icon:x.nFo}),description:"Ordered list of items",aliases:["ol"],action:e=>{e.chain().focus().toggleOrderedList().run()}}]}];var Z=a(25651),N=a(91512),A=a(65278),P=a(26761),S=a(60266),k=a(24737),L=a(67294),B=a(94405),C=e=>{let t={...e.node.attrs},[a,n]=(0,L.useState)(!1),[r,i]=(0,L.useState)(t.width),l=e.editor.isActive("frameImage");return(0,v.BX)(S.T5,{className:"relative flex flex-col items-center",children:[r&&l&&!a&&(0,v.tZ)(B.Z,{maxValue:k.yW,value:r,onUpdateValue:t=>{e.updateAttributes({width:t.toString()}),i(t)}}),(0,v.tZ)("div",{style:r?{width:"".concat(r,"px")}:{},children:(0,v.tZ)("img",{className:"max-w-full object-contain",src:a?"/vs/failed-image-placeholder.png":t.src,onError:()=>n(!0),alt:t.alt||"figure image",onClick:()=>{"function"==typeof e.getPos&&e.editor.commands.focus(e.getPos()+1)}})}),(0,v.tZ)(S.ms,{})]})};let T=P.ZP.extend({name:"frameImage",content:"block*",addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}),parseHTML:()=>[{tag:"frameImage"}],renderHTML(e){let{HTMLAttributes:t,node:a}=e;return["div",{class:"flex relative flex-col items-center"},["div",{style:a.attrs.width?"width: ".concat(a.attrs.width,"px"):""},["img",{class:"max-w-full object-contain",src:a.attrs.src,alt:a.attrs.alt,style:"max-width: ".concat(k.yW,"px")}]],["div",{},0]]},addNodeView:()=>(0,S.fW)(C)});var H=a(66074),I=a(57617),_=a(91075),E=a(13458),M=e=>{let{isPlaying:t,videoCloneExists:a}=e;return(0,v.tZ)("div",{className:"pointer-events-none absolute bottom-0  right-0 z-1 m-2 h-32 w-32 rounded ".concat(t?"bg-neutral-800/50 text-white":"bg-neutral-50/70 text-neutral-500"," pt-8 text-center text-xs"),children:a?(0,v.BX)("div",{children:["Avatar ",(0,v.tZ)("br",{})," animation is",(0,v.tZ)("br",{})," available after",(0,v.tZ)("br",{})," generation"]}):(0,v.BX)("div",{children:["Video",(0,v.tZ)("br",{})," thumbnail ",(0,v.tZ)("br",{}),"preview ",(0,v.tZ)("br",{}),"missing"]})})},V=e=>{let{playbackStatus:t,userAvatar:a,selectedAvatar:n}=(0,L.useContext)(_.ZP);return(0,v.BX)(S.T5,{className:"group relative mb-10","data-id":e.node.attrs.unique_id,"data-frame":!0,style:{height:k.cJ,width:k.Kf},children:[n===(null==a?void 0:a.unique_id)&&(0,v.tZ)(M,{isPlaying:"PAUSED"!==t,videoCloneExists:!!(null==a?void 0:a.avatar_video_path)}),(0,v.tZ)(S.ms,{as:"div",className:"h-full rounded-md bg-white p-6","data-frame-content":!0,"data-id":e.node.attrs.unique_id,children:(0,v.tZ)(E.Z,{className:"absolute right-2 top-2 w-20"})})]})};let O=p.NB.create({name:"frame",content:"frameItem",group:"block",parseHTML:()=>[{tag:"frame"}],addAttributes:()=>({unique_id:{default:null},order:{default:0}}),renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,p.P1)(t,{class:"group relative mb-10 ",style:"height: ".concat(k.cJ,"px; width: ").concat(k.Kf,"px ")}),["div",{class:"rounded-md bg-white px-6 py-6 h-full overflow-hidden"},0]]},addNodeView:()=>(0,S.fW)(V)}),U=a(20336).Z.extend({content:"frameWrapper*",addKeyboardShortcuts:()=>({"Mod-a":()=>!0}),onTransaction(e){let{transaction:t}=e;"paragraph"===t.selection.$anchor.parent.type.name&&this.editor.chain().insertContentAt(this.editor.state.selection.head,{type:"frameParagraph"}).focus().run()}});var G=e=>(0,v.tZ)(S.T5,{children:(0,v.tZ)(S.ms,{as:"div",className:"flex flex-col ".concat("center"===e.node.attrs.layout?"justify-center":""),style:{height:k.cJ-96}})});let D=p.NB.create({name:"frameItem",content:"block*",group:"block",atom:!0,parseHTML:()=>[{tag:"frameItem"}],addAttributes:()=>({layout:{default:null}}),renderHTML(e){let{HTMLAttributes:t,node:a}=e;return["div",{},["div",{class:"flex flex-col ".concat("center"===a.attrs.layout?"justify-center":""),style:"min-height: ".concat(k.cJ-96,"px")},0]]},addNodeView:()=>(0,S.fW)(G)});var R=e=>{var t,a,n,r;let{selectedFrame:i,isGeneratingImage:l}=(0,L.useContext)(_.ZP),o=(null===(r=e.node.content)||void 0===r?void 0:null===(n=r.content)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:null===(t=a.attrs)||void 0===t?void 0:t.order)!==i;return(0,v.tZ)(S.T5,{children:(0,v.tZ)(S.ms,{as:"div",className:"frame-wrapper ".concat(o&&!l?"hidden ":"")})})};let X=p.NB.create({name:"frameWrapper",content:"frame narration",group:"block",atom:!0,parseHTML:()=>[{tag:"frameWrapper"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",{},["div",{class:"frame-wrapper"},0]]},addNodeView:()=>(0,S.fW)(R,{})});var W=a(2376);let j=p.hj.create({name:"limitCharacters",addOptions:()=>({node:null,limit:0}),addProseMirrorPlugins(){return[new W.Sy({filterTransaction:(e,t)=>{let a={};t.doc.descendants((e,t,n,r)=>{if(e.type.name===this.options.node){let t=e.textBetween(0,e.content.size,void 0," ").length,n=e.attrs.order;a[n]={...a[n],oldSize:t}}}),e.doc.descendants((e,t,n,r)=>{if(e.type.name===this.options.node){let t=e.textBetween(0,e.content.size,void 0," ").length,n=e.attrs.order;a[n]={...a[n],newSize:t}}});let n=(t,a)=>{let n=this.options.limit<t?t:this.options.limit;if(a<=n||t>n&&a>n&&a<=t)return!0;if(t>n&&a>n&&a>t)return!1;let r=e.selection.$head.pos;return e.deleteRange(r-(a-n),r),!0},r=!1;return Object.keys(a).map(e=>{n(a[e].oldSize,a[e].newSize)||(r=!0)}),!r}})]}});var q=a(42474),F=a.n(q),z=a(91444),J=a(38651),K=a(66054),Y=e=>{var t;let{node:a,updateAttributes:n,editor:r}=e,{playbackStatus:i,selectedFrame:l,totalFrames:o,selectedAvatar:s,updateSelectedFrame:c,updatePlaybackStatus:d,updatePlayedProgress:u}=(0,L.useContext)(_.ZP),m=a.attrs.scriptHashValue,h=a.attrs.audioUrl,p=a.attrs.order,f=a.textContent,g=F().createHmac("sha256",f+s).digest("hex"),x=(0,L.useRef)(null),b=(0,L.useRef)(i),w=e=>{if(x.current){x.current.play(),d("PLAYING"),x.current.onended=()=>{o>l+1?c(l+1):(d("PAUSED"),c(0)),u(0)};return}let t=new Audio(e);x.current=t,t.addEventListener("canplay",e=>{t.play(),d("PLAYING")}),t.addEventListener("timeupdate",e=>{"PLAYING"===b.current&&u(t.currentTime/(t.duration===1/0?5:t.duration))}),t.onended=()=>{x.current=null,o>l+1?c(l+1):(d("PAUSED"),c(0)),u(0)}},y=()=>{var e;null===(e=x.current)||void 0===e||e.pause()},Z=async e=>{if(!s)return;let t=await K.Z.textToSpeechUpdate(s,e);if("SUCCESS"===t.status){let e=t.speech_path;n({scriptHashValue:g,audioUrl:e}),x.current=null,w(e);return}if("FAILURE"===t.status){z.Am.error("Something went wrong while generating the audio"),d("PAUSED");return}setTimeout(()=>{Z(e)},3e3)},N=async()=>{var e,t;if(d("LOADING"),m===g){w(h);return}if(!s)return;let a=await K.Z.textToSpeech(s,[{text:f}]);if((null==a?void 0:null===(e=a.data)||void 0===e?void 0:e[0].status)==="SUCCESS"){let e=a.data[0].speech_path;n({scriptHashValue:g,audioUrl:e}),x.current=null,w(e);return}if((null==a?void 0:null===(t=a.data)||void 0===t?void 0:t[0].status)==="FAILURE"){z.Am.error("Something went wrong while generating the audio"),d("PAUSED");return}a.data[0].tts_unique_id&&setTimeout(()=>Z(a.data[0].tts_unique_id),3e3)},A=()=>{d("PAUSED"),y()};return(0,L.useEffect)(()=>{if(l===p&&"PLAYING"===i){u(0),N();return}if(l!==p){var e;null===(e=x.current)||void 0===e||e.pause(),x.current=null}},[l]),(0,L.useEffect)(()=>{b.current=i,l===p&&"PLAYING"===i&&N(),l===p&&"PAUSED"===i&&A()},[i]),(0,v.BX)(S.T5,{className:"absolute hidden overflow-auto rounded bg-white sm:inline-block",style:{width:k.jj,maxHeight:k.cJ},children:[(0,v.BX)("div",{className:"flex items-center gap-2 p-6 pb-0",contentEditable:!1,children:[(0,v.tZ)(J.Z,{variant:"slide"}),(0,v.tZ)("div",{className:"ml-2 text-sm font-medium text-neutral-500",children:"Scene Narration"})]}),(0,v.tZ)(S.ms,{as:"div",className:"p-6","data-narration-order":null===(t=a.attrs)||void 0===t?void 0:t.order})]})};let $=p.NB.create({name:"narration",content:"frameParagraph+",group:"block",atom:!0,isolating:!0,defining:!0,parseHTML:()=>[{tag:"narration"}],addAttributes:()=>({audioUrl:{default:null},scriptHashValue:{default:null},order:{default:null}}),renderHTML(e){let{HTMLAttributes:t}=e;return["narration",(0,p.P1)(t,{})]},addNodeView:()=>(0,S.fW)(Y)});var Q=()=>[U,g.Y1,f.V.configure({dropcursor:!1,heading:!1,horizontalRule:!1,blockquote:!1,listItem:!1,document:!1,history:!1,codeBlock:!1}),u.p,g.Bf,h.v,g.dn,d.P.extend({addKeyboardShortcuts:()=>({})}).configure({types:["frameHeading","frameParagraph"]}),s.a,c.$,m.ZT,o.V.configure({includeChildren:!0,showOnlyCurrent:!1,placeholder:()=>""}),g.vb.configure({groups:y}),i.F,r.m.configure({width:2,class:"ProseMirror-dropcursor border-black"}),g.X6.extend({name:"frameHeading",renderHTML(e){let{node:t,HTMLAttributes:a}=e,n=this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0];return["h".concat(n),(0,p.P1)(this.options.HTMLAttributes,{class:"text-lg !m-0"}),0]}}),O,D,n.ZP.extend({name:"frameBullet",renderHTML(e){let{HTMLAttributes:t}=e;return["ul",(0,p.P1)(this.options.HTMLAttributes,{...t,class:"p-0 text-sm"}),0]}}),l.Z.extend({content:"frameParagraph block*"}),T,Z.Z.extend({name:"frameParagraph"}),X,$,j.configure({node:"frame",limit:700}),H.u.configure({nodeList:["frameWrapper","frame","narration"]}),I.M,A.Z,N.Z,g.qW]},94405:function(e,t,a){var n=a(35944);a(67294),t.Z=e=>{let{maxValue:t,value:a,onUpdateValue:r}=e;return(0,n.tZ)("div",{className:"absolute left-0 top-0 rounded-full bg-neutral-500/20 px-4 py-2",children:(0,n.tZ)("input",{className:"h-2 w-40 cursor-pointer appearance-none rounded-lg bg-gray-500",type:"range",min:100,max:t,value:a,onChange:e=>r(Number(e.target.value))})})}},66074:function(e,t,a){a.d(t,{u:function(){return i}});var n=a(5865),r=a(2376);let i=n.hj.create({name:"DisableDeleteNode",addOptions:()=>({nodeList:[]}),addProseMirrorPlugins(){return[new r.Sy({options:this.options,props:{handleKeyDown(e,t){if("Backspace"===t.key||"Delete"===t.key){let{selection:t}=e.state;if(t instanceof r.qv){let{node:e,from:a,to:n}=t;if(this.spec.options.nodeList.includes(e.type.name))return!0}}return!1}}})]}})},57617:function(e,t,a){a.d(t,{M:function(){return i}});var n=a(5865),r=a(2376);let i=n.hj.create({name:"DisableDragAndDrop",addProseMirrorPlugins:()=>[new r.Sy({filterTransaction:(e,t)=>{var a;return(null==e?void 0:null===(a=e.meta)||void 0===a?void 0:a.uiEvent)!=="drop"}})]})},25651:function(e,t,a){var n=a(5865);let r=a(26022).Z.extend({name:"slideParagraph",renderHTML(e){let{HTMLAttributes:t}=e;return["p",(0,n.P1)(this.options.HTMLAttributes,{...t,class:"mt-0"}),0]}});t.Z=r},23473:function(e,t,a){a.r(t);var n=a(35944);a(67294);var r=a(92259),i=a(78052),l=a(44913);t.default=e=>{let{editorData:t,scaleConfig:a,variant:o}=e,s=(0,r.a)(t,"SLIDE"===o?[...(0,i.Z)()]:[...(0,l.Z)()]);return(0,n.tZ)("div",{style:a?{width:a.elementOriginalWidth*a.scaleFactor,height:a.elementOriginalHeight*a.scaleFactor}:{},className:"group-fullscreen:h-screen group-fullscreen:w-screen",children:(0,n.tZ)("div",{style:{width:null==a?void 0:a.elementOriginalWidth,transform:"scale(".concat(null==a?void 0:a.scaleFactor,", ").concat(null==a?void 0:a.scaleFactor,")"),transformOrigin:"left top"},className:"group-fullscreen:h-screen group-fullscreen:w-screen",children:(0,n.tZ)("div",{dangerouslySetInnerHTML:{__html:s},className:"ProseMirror group-fullscreen:h-screen group-fullscreen:w-screen","data-disableblockstyles":!0,"data-disabletypographystyles":!0,"data-disablecustomstyles":!0})})})}},13458:function(e,t,a){var n=a(35944);a(67294),t.Z=e=>{let{className:t}=e;return(0,n.tZ)("img",{src:"/vs/water-mark.png",alt:"scispace-watermark",className:t})}},24737:function(e,t,a){a.d(t,{AO:function(){return i},HV:function(){return u},Kf:function(){return s},Tw:function(){return r},Y_:function(){return m},cJ:function(){return o},fB:function(){return h},jR:function(){return l},jj:function(){return c},ps:function(){return n},yW:function(){return d}});let n=394,r=700,i=370,l=282,o=521,s=293,c=358,d=245,u=420,m=90,h=90},38651:function(e,t,a){var n=a(35944),r=a(67294),i=a(73582),l=a(67814),o=a(91075),s=a(33405),c=a(64183),d=a(19130);t.Z=e=>{let{variant:t}=e,{playbackStatus:a,updatePlaybackStatus:u,isGeneratingVideo:m,isGeneratingImage:h}=(0,r.useContext)(o.ZP);return(0,n.tZ)(s.Z,{variant:"contained",shape:"rounded",onClick:"PAUSED"===a?()=>{(0,d._P)("global"===t?"P2VPrivate GlobalNarration Played":"P2VPrivate SlideNarration Played"),u("PLAYING")}:()=>u("PAUSED"),startIcon:"LOADING"===a?(0,n.tZ)(c.Z,{className:"w-full"}):(0,n.tZ)(l.G,{className:" transition-all",icon:"PAUSED"===a?i.zc:i.XQY}),className:" !bg-primary-400 ".concat("slide"===t?"!h-8 !w-8":" !h-11 !w-11"),disabled:"LOADING"===a||m||h})}},91075:function(e,t,a){a.d(t,{gM:function(){return E},ZP:function(){return M}});var n=a(35944),r=a(67294),i=a(11163),l=a(73582),o=a(67814),s=a(91444),c=a(56559),d=a(2416),u=a(33405),m=a(26835),h=a(49876),p=a(19130),f=a(64749),g=a(53914),v=a(39596),x=a(36646),b=a(23473),w=a(64183),y=a(24737),Z=e=>{let{data:t,isSelected:a,isPlaying:r,onClick:i,idx:l}=e;return(0,n.BX)("div",{onClick:()=>{null==i||i()},className:"ml-4 cursor-pointer",children:[(0,n.BX)("div",{className:"\n         ".concat(a?"ring-2 ring-primary":"ring-1 ring-neutral-100"," pointer-events-none relative select-none overflow-hidden rounded transition-all"),children:[(0,n.tZ)(b.default,{editorData:{type:"doc",content:[t]},scaleConfig:{scaleFactor:.1,elementOriginalHeight:y.cJ,elementOriginalWidth:y.Kf},variant:"VIDEO"}),(0,n.tZ)("div",{className:"absolute bottom-1 right-1 h-5 w-5 bg-white pl-1.5 pt-0.5 text-xs shadow",children:r&&a?(0,n.tZ)(w.Z,{className:"text-primary-500"}):l+1})]}),a&&(0,n.BX)("div",{className:"mt-1",children:[(0,n.tZ)("div",{className:"m-auto h-1 w-2 rounded bg-primary-500"}),(0,n.BX)("div",{className:"mt-2 hidden text-center text-8 font-medium text-primary sm:block",children:["SCENE ",l+1]})]})]})},N=a(21432),A=e=>{let{handleGenerateVideo:t,selectedAvatarImage:a}=e;return(0,n.BX)("div",{children:[(0,n.tZ)("h2",{className:"my-0 text-xl font-semibold",children:"Your unique voice and video clone can skyrocket your content's reach on social media."}),(0,n.tZ)("p",{className:"text-sm text-neutral-500",children:"It's the secret sauce for making your mark"}),(0,n.tZ)(N.Z,{href:(0,v.vM)(),underline:"never",children:(0,n.BX)(u.Z,{color:"secondary",variant:"contained",className:"mt-32 h-12",fullWidth:!0,children:[(0,n.tZ)(o.G,{icon:l.ILF})," Add my clone"]})}),(0,n.BX)(u.Z,{color:"light",variant:"outlined",fullWidth:!0,className:"mt-4 h-12",onClick:t,children:[a&&(0,n.tZ)("img",{className:"h-8  w-8",alt:"selected-avatar",src:a}),"Continue with Sample Voice"]})]})},P=a(70917),S=a(68779),k=e=>{var t,a;let{avatar_audio_path:i,avatar_video_path:s,isSelected:u,onClick:m}=e,{videoFullSlug:h,paperFullSlug:f}=(0,r.useContext)(M),{userProfile:g,user:x}=(0,c.Eu)(),{startProfileClaim:b}=(0,d.S)(),w=s?"VIDEO_CLONE":i?"AUDIO_CLONE":"NO_CLONE",y=()=>{m()},Z=h?(0,v.vM)((0,v.Kr)(h)):null;return"NO_CLONE"===w?(0,n.BX)("div",{className:"flex items-center gap-3 whitespace-nowrap rounded-full bg-neutral-10  p-3",children:[(0,n.tZ)("div",{className:"h-8 w-8 rounded-full bg-black opacity-20"}),(0,n.BX)("div",{children:[(0,n.tZ)("p",{className:"m-0 text-sm text-neutral-600",children:"My avatar"}),(0,n.tZ)("p",{className:"m-0 text-xs text-neutral-600",children:"Audio + Video"})]}),Z?(0,n.tZ)(N.Z,{href:Z,underline:"never",className:"ml-6",onClick:e=>{if(g){(0,p._P)("P2VPrivate CreateAvatar Initiated");return}e.preventDefault(),b({successUrl:f?(0,v.KG)(f,{publish_paper:"1"}):null,location:"createAvatar"})},children:(0,n.tZ)("div",{className:"h-full cursor-pointer rounded-full border border-secondary bg-white px-3 py-2 text-sm font-semibold text-secondary",children:"Record"})}):null]}):"AUDIO_CLONE"===w?(0,n.BX)("div",{className:"cursor-pointer items-center rounded-full p-1 sm:p-3 ".concat(u?"bg-primary-5":"bg-neutral-10"," flex gap-3"),onClick:y,children:[(0,n.BX)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary",children:[(0,n.tZ)(o.G,{className:"text-white",icon:l.UOM})," "]}),(0,n.BX)("div",{children:[(0,n.tZ)("p",{className:"m-0 text-sm ".concat(u?"text-primary":"text-neutral-600"),children:null==x?void 0:null===(t=x.full_name)||void 0===t?void 0:t.split(" ")[0]}),(0,n.tZ)("p",{className:"m-0 text-xs text-neutral-600",children:"Audio only"})]}),Z?(0,n.tZ)(N.Z,{href:Z,underline:"never",children:(0,n.tZ)("div",{className:"ml-4 h-full cursor-pointer rounded-full border border-secondary bg-white px-3 py-2 text-sm font-semibold text-secondary",children:"Complete your clone"})}):null]}):(0,n.BX)("div",{className:"cursor-pointer items-center rounded-full p-1 sm:p-3 ".concat(u?"bg-primary-5":"bg-neutral-10"," flex  gap-3"),onClick:y,children:[(null==x?void 0:x.profile_pic)?(0,n.tZ)("img",{className:"h-8 w-8 rounded-full",alt:"profile-image",src:x.profile_pic}):null,(0,n.BX)("div",{children:[(0,n.tZ)("p",{className:"m-0 text-sm ".concat(u?"text-primary":"text-neutral-600"),children:null==x?void 0:null===(a=x.full_name)||void 0===a?void 0:a.split(" ")[0]}),(0,n.tZ)("p",{className:"m-0 text-xs text-neutral-600",children:"My Clone"})]}),(0,n.tZ)(o.G,{className:u?"text-primary":"text-neutral-600",icon:u?l.fV7:S.diR})]})},L=e=>{let{name:t,avatar_image_path:a,isSelected:r,onClick:i}=e;return(0,n.BX)("div",{className:"flex cursor-pointer items-center gap-4 whitespace-nowrap rounded-full border p-3 pr-5 transition-all ".concat(r?" bg-primary-5":""),onClick:i,children:[(0,n.tZ)("img",{alt:"avatar_image",src:a,className:"h-8 w-8 rounded-full"}),(0,n.BX)("div",{children:[(0,n.tZ)("p",{className:" m-0 text-sm font-semibold ".concat(r?"text-primary":"text-neutral-600"," "),children:t}),(0,n.tZ)("p",{className:"m-0 text-xs ".concat(r?"":"text-neutral-500"),children:"Audio only"})]}),(0,n.tZ)(o.G,{className:r?"text-primary":"text-neutral-600",icon:r?l.fV7:S.diR})]})},B=()=>{let{defaultUserAvatars:e,userAvatar:t,updateSelectedAvatar:a,selectedAvatar:i}=(0,r.useContext)(M);return(0,n.BX)("div",{className:"scroll-basic mb-4 flex overflow-auto px-6 pt-4",children:[(0,n.tZ)("p",{className:"mr-6 hidden text-base font-semibold text-neutral-700 sm:block",children:"Narrator"}),(0,n.BX)("div",{className:"flex gap-4",children:[t?(0,n.tZ)(k,{...t,isSelected:i===t.unique_id,onClick:()=>a(t.unique_id)}):null,e.map(e=>(0,P.az)(L,{...e,isSelected:i===e.unique_id,key:e.unique_id,onClick:()=>a(e.unique_id)}))]})]})},C=a(38651),T=()=>{let{totalFrames:e,playedProgress:t,selectedFrame:a}=(0,r.useContext)(M);return(0,n.tZ)("div",{className:"flex w-full gap-1",children:Array.from(Array(e).keys()).map(e=>{let r=e<a?"#047BB2":e>a?"#D8E5EA":"linear-gradient(to right, #047BB2 ".concat(100*t,"%,  #D8E5EA ").concat(100*t,"%)");return(0,n.tZ)("div",{style:{background:r},className:"h-1 w-full"},e)})})},H=e=>{var t,a,b,w,y,N,P,S,k;let{framesData:L,uniqueId:H,updateIsGeneratingFrameImages:I}=e,[_,E]=(0,r.useState)(!1),{userProfile:V}=(0,c.Eu)(),{startProfileClaim:O}=(0,d.S)(),{updatePlaybackStatus:U,updateSelectedFrame:G,updatePlayedProgress:D,generateVideo:R,isGeneratingImage:X,isGeneratingVideo:W,playbackStatus:j,selectedFrame:q,paperFullSlug:F,userAvatar:z,selectedAvatar:J,defaultUserAvatars:K}=(0,r.useContext)(M),[Y,$]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)("NARRATOR"),et=(0,i.useRouter)(),ea=(null==z?void 0:z.avatar_audio_path)||(null==z?void 0:z.avatar_video_path),en=()=>{O({successUrl:F?(0,v.KG)(F,{publish_paper:"1"}):null,location:"generateVideo"})},er=async()=>{let e=K.find(e=>e.unique_id===J)?"Predefined":(null==z?void 0:z.avatar_video_path)?"UserVideo":"UserAudio";(0,p._P)("P2VPrivate Generate Clicked",{avatarInput:e});try{window.scrollTo(0,0),document.body.style.overflow="hidden",I(!0),await (0,g.gw)(3e3);let e=await (0,f.nP)("#frame-editor-container [data-frame] [data-frame-content]","data-id",{width:1080,height:1920});e.map(e=>console.log(URL.createObjectURL(e)));let t=e.map(e=>e.name),a=await h.Z.getVideosFrameImageUploadSignedUrl({frames_unique_id:H,files:t}),n=e.map(async(e,t)=>{let n=a.data[t];await (0,x.O)(e,n)});await Promise.all(n),I(!1),$(!0),await R(),F&&et.push((0,v.KG)(F,{publish_paper:"1"}))}catch(e){console.log(e),s.Am.error("Something went wrong while generating the images")}finally{$(!1),I(!1),document.body.style.overflow="unset"}},ei=e=>{U("PAUSED"),G(e),D(0)},el=(null==L?void 0:null===(P=L.content)||void 0===P?void 0:null===(N=P[q])||void 0===N?void 0:null===(y=N.content)||void 0===y?void 0:null===(w=y[1])||void 0===w?void 0:null===(b=w.content)||void 0===b?void 0:null===(a=b[0])||void 0===a?void 0:null===(t=a.content)||void 0===t?void 0:t[0].text)||"",eo=null===(S=K.find(e=>e.unique_id===J))||void 0===S?void 0:S.avatar_image_path,es=W||X||Y;return(0,n.BX)("div",{className:"fixed bottom-0 left-0 z-1 w-full rounded-lg bg-white shadow-top  sm:rounded-none sm:shadow-none",children:[(0,n.BX)("div",{className:"flex justify-center gap-3 pt-2 sm:hidden",children:[(0,n.tZ)(u.Z,{variant:"NARRATOR"===Q?"contained":"text",shape:"rounded",size:"sm",onClick:()=>ee("NARRATOR"),children:"Narrator"}),(0,n.tZ)(u.Z,{variant:"SCRIPT"===Q?"contained":"text",shape:"rounded",size:"sm",onClick:()=>ee("SCRIPT"),children:"Script"})]}),(0,n.tZ)("div",{className:"".concat("NARRATOR"===Q?"":"hidden"," ").concat(es?"pointer-events-none opacity-70":""),children:(0,n.tZ)(B,{})}),(0,n.tZ)("div",{className:"".concat("SCRIPT"===Q?"":"hidden"),children:(0,n.tZ)("p",{className:" m-4 max-h-96 overflow-scroll text-sm",children:el})}),(0,n.tZ)(T,{}),(0,n.BX)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between sm:px-12 sm:pt-5",children:[(0,n.tZ)("div",{className:"absolute z-1 h-24 bg-white px-6 pt-3 sm:relative sm:ml-12 sm:h-min sm:px-0 sm:pt-0",children:(0,n.tZ)(C.Z,{variant:"global"})}),(0,n.tZ)("div",{className:"scroll-bar-hidden flex overflow-auto p-2 pl-24 sm:justify-center sm:pl-2 ".concat(es?"pointer-events-none opacity-70":""),children:null==L?void 0:null===(k=L.content)||void 0===k?void 0:k.map((e,t)=>{var a;return(0,n.tZ)(Z,{data:(null==e?void 0:null===(a=e.content)||void 0===a?void 0:a[0])||[],onClick:()=>ei(t),isSelected:q===t,isPlaying:"PLAYING"===j,idx:t},t)})}),(0,n.tZ)(u.Z,{variant:"contained",color:"secondary",onClick:()=>{if(!V){en();return}if(!ea){E(!0);return}er()},endIcon:(0,n.tZ)(o.G,{icon:l.qHV}),isLoading:es,className:"z-1 rounded-none sm:rounded",disabled:es,children:"Generate & Publish Video"}),(0,n.tZ)(m.default,{content:(0,n.tZ)(A,{selectedAvatarImage:eo,handleGenerateVideo:er}),contentClassName:"max-w-md w-full",open:_,onClose:()=>E(!1),onOpen:()=>E(!0)})]})]})},I=a(90717);let _=r.createContext({selectedFrame:0,playbackStatus:"PAUSED",isGeneratingImage:!1,userAvatar:null,defaultUserAvatars:[],selectedAvatar:null,isGeneratingVideo:!1,totalFrames:0,playedProgress:0,paperFullSlug:null,videoFullSlug:null,generateVideo:()=>{},updateSelectedAvatar:e=>{},updatePlaybackStatus:e=>{},updatePlayedProgress:e=>{},updateSelectedFrame:e=>{}}),E=e=>{var t,a;let{children:i,editor:l,uniqueId:o,defaultUserAvatars:s,userAvatar:c,paperFullSlug:d,slideSlug:u,videoFullSlug:m,isGeneratingVideo:h}=e,[p,f]=(0,r.useState)(0),[g,v]=(0,r.useState)("PAUSED"),[x,b]=(0,r.useState)(!1),[w,y]=(0,r.useState)(0),Z=((null==c?void 0:c.avatar_audio_path)||(null==c?void 0:c.avatar_video_path))&&c.consent_video_path?c.unique_id:null==s?void 0:null===(t=s[0])||void 0===t?void 0:t.unique_id,[N,A]=(0,r.useState)(Z||""),P=null===(a=l.getJSON().content||[])||void 0===a?void 0:a.length,S=async()=>{await I.Z.triggerVideoGeneration(u,N)};return(0,n.BX)(_.Provider,{value:{selectedFrame:p,playbackStatus:g,isGeneratingImage:x,defaultUserAvatars:s,userAvatar:c,selectedAvatar:N,totalFrames:P,playedProgress:w,paperFullSlug:d,isGeneratingVideo:h,videoFullSlug:m,updatePlayedProgress:e=>{y(e)},generateVideo:S,updateSelectedFrame:e=>{f(e)},updatePlaybackStatus:e=>{v(e)},updateSelectedAvatar:e=>{e&&(v("PAUSED"),y(0),A(e))}},children:[i,(0,n.tZ)(H,{framesData:l.getJSON(),uniqueId:o,updateIsGeneratingFrameImages:e=>b(e)})]})};var M=_},66054:function(e,t,a){var n=a(9669),r=a.n(n);let i="/api/avatar";class l{constructor(){this.getUserAvatar=async()=>(await r().get("".concat(i,"/user"))).data,this.createUserAvatarEntry=async()=>(await r().post("".concat(i,"/user"))).data,this.getDefaultUserAvatars=async()=>(await r().post("".concat(i,"/templates"))).data,this.updateUserAvatar=async(e,t)=>(await r().patch("".concat(i,"/user"),{asset_uuid:e,field_to_update:t})).data,this.textToSpeech=async(e,t)=>{let a="".concat(i,"/").concat(e,"/text-to-speech");return(await r().post(a,t)).data},this.textToSpeechUpdate=async(e,t)=>{let a="".concat(i,"/").concat(e,"/text-to-speech/").concat(t);return(await r().get(a)).data}}}let o=new l;t.Z=o},64749:function(e,t,a){a.d(t,{Hm:function(){return o},nP:function(){return s},pN:function(){return c}});var n=a(61120),r=a.n(n);let i=e=>new Promise((t,a)=>{e.onload=()=>t(!0)}),l=(e,t,a)=>{let n=document.createElement("canvas");n.width=t,n.height=a;let r=n.getContext("2d");if(r)r.drawImage(e,0,0,t,a);else throw Error("Unable to get 2D context");return n},o=async(e,t)=>{let a=document.createElement("canvas");a.width=t.width,a.height=t.height;let n=e.toDataURL("image/jpeg",1),r=new Image;r.src=n;let l=1,o=1,s=e.getAttribute("width"),c=e.getAttribute("height");s&&(l=parseInt(s)/parseInt(window.getComputedStyle(e).width)),c&&(o=parseInt(c)/parseInt(window.getComputedStyle(e).height)),await i(r);let d=a.getContext("2d");return d?(d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.drawImage(r,t.x*l,t.y*o,t.width*l,t.height*o,0,0,t.width,t.height),await new Promise(e=>{a.toBlob(t=>{if(!t)throw"Blob not found";e(new File([t],"image.jpg",{type:"image/jpeg"}))},"image/jpeg",1)})):null},s=(e,t,a)=>new Promise(async(n,i)=>{let o=document.querySelectorAll(e),s=[];for(let e=0;e<o.length;e++){let c=o[e];try{let e="".concat(c.getAttribute(t),".png"),d=await r()(c,{width:c.clientWidth,height:c.clientHeight,useCORS:!0,allowTaint:!1,scale:4}),u=l(d,a.width,a.height),m=()=>new Promise(e=>{u.toBlob(t=>{e(t)},"image/png")}),h=await m();if(h){let t=new File([h],e,{type:"image/png"});s.push(t),s.length===o.length&&n(s)}else console.error("Failed to capture screenshot: Blob is null"),i("Failed to capture screenshot: Blob is null")}catch(e){console.error("Error capturing screenshot:",e),i("Error capturing screenshot: ".concat(e))}}}),c=(e,t,a,n)=>{let r,i,l,o;let s=e.getContext("2d"),c=t.videoWidth,d=t.videoHeight,u=a/n;u>c/d?(l=c,r=0,i=(d-(o=c/u))/2):(o=d,r=(c-(l=d*u))/2,i=0),null==s||s.clearRect(0,0,a,n),null==s||s.drawImage(t,r,i,l,o,0,0,a,n)}},63777:function(e,t,a){a.d(t,{M:function(){return n}});let n=e=>{try{let t=document.querySelector("#slide-editor-container [data-pageorder='".concat(e,"']"));t&&t.requestFullscreen()}catch(e){console.log("showSlideInFullScreen",e)}}}}]);