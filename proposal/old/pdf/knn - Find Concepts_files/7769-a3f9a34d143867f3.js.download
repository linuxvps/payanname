"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7769,9606,3778],{39483:function(e,t,a){a.d(t,{Z:function(){return _}});var n=a(35944),l=a(67294),s=a(5152),i=a.n(s),r=a(98388),o=a(87840),c=a(97435),d=a(95563),u=a(65723),m=a(51048);let p=i()(()=>a.e(7609).then(a.bind(a,96280)),{loadableGenerated:{webpack:()=>[96280]},ssr:!1}),h=i()(()=>a.e(2686).then(a.bind(a,2946)),{loadableGenerated:{webpack:()=>[2946]},ssr:!1});var g=()=>{let{modal:e}=(0,l.useContext)(u.$h),{modal:t}=(0,l.useContext)(m.L);return(0,n.BX)(n.HY,{children:[!!e&&(0,n.tZ)(p,{}),!!t&&(0,n.tZ)(h,{})]})},f=a(41630);let E=i()(()=>Promise.all([a.e(2512),a.e(7299)]).then(a.bind(a,1149)),{loadableGenerated:{webpack:()=>[1149]},ssr:!1});var _=e=>{let{hide:t,children:a,splitViewProps:l,containerClassName:s="",headerProps:i={}}=e,u=!(null==t?void 0:t.includes("HEADER")),m=!(null==t?void 0:t.includes("FOOTER")),p=!(null==t?void 0:t.includes("WORKSPACE"));return(0,n.BX)(n.HY,{children:[null,(0,n.BX)("div",{className:(0,r.m6)("relative",s),children:[(0,n.tZ)(c.default,{...l,floatingSplitviewClassname:"top-14"}),u&&(0,n.tZ)(f.Z,{...i}),p&&(0,n.tZ)(d.Z,{}),(0,n.tZ)(E,{}),a,m&&(0,n.tZ)(o.default,{}),(0,n.tZ)(g,{})]})]})}},80627:function(e,t,a){var n=a(67294),l=a(11163),s=a(87278);t.Z=e=>{let{queryParam:t}=e,a=(0,l.useRouter)(),{sendMessage:i,toggleCopilotSize:r,copilotUIState:o,copilotSize:c,getEntityConversation:d}=(0,n.useContext)(s.C),u=(0,n.useRef)(),m=(0,n.useRef)(!1);(0,n.useEffect)(()=>{let e=a.query[t];e&&(u.current=e,delete a.query.followup_question,a.replace({pathname:a.pathname,query:{...a.query}},void 0,{shallow:!0}))},[t]);let p=async()=>{r("LARGE"),m.current=!0;let e=await d();null!=e&&e.conversation_uuid||await i({message_type:"TEXT",message:u.current,user_prompt_type:"QUESTION",attachment:null,selection_type:null},{conversationQuestionType:"USER_GENERATED"})};return(0,n.useEffect)(()=>{null===o&&u.current&&!m.current&&p()},[o,c]),null}},94581:function(e,t,a){var n=a(35944),l=a(68779),s=a(67814);t.Z=e=>{let{}=e;return(0,n.tZ)("div",{className:"flex h-full items-center justify-center",children:(0,n.tZ)(s.G,{icon:l.AX7,className:"animate-spin",size:"lg"})})}},37439:function(e,t,a){a.r(t);var n=a(35944),l=a(67294),s=a(68779),i=a(73582),r=a(67814),o=a(56559),c=a(87278),d=a(33405),u=a(31878),m=a(84795),p=a(28508),h=a(94853);t.default=e=>{let{maxItems:t=p.YE,onClick:a,onShowMoreClick:g,title:f="Chat with Paper"}=e,{copilotUIState:E,fetchingGenericQuestions:_,genericQuestions:N,copilotDisabled:v,showLoginPrompt:S,variant:b,sendMessage:C,toggleCopilotSize:Z}=(0,l.useContext)(c.C),{setAuthType:w,changeAuthTypeContext:y}=(0,l.useContext)(o.Vo),[O,T]=(0,l.useState)(!1),I=async e=>{C({message_type:"TEXT",message:e,selection_type:null,user_prompt_type:"QUESTION",attachment:null},{onboarding_type:"PREDEFINED",conversationQuestionType:"GENERIC",conversationQuestionLocation:"HERO",triggerer:"ONBOARDING_FROM_HERO_SECTION"})},R=e=>{if(null==a||a(),Z("LARGE"),(0,h.pv)(),!e||A){S&&(null==w||w("auth_signup"),y("copilot"));return}I(e)},A="SENDING_MESSAGE"===E||"FETCHING_MESSAGES"===E||v,G=(0,l.useMemo)(()=>N.slice(0,O?N.length:t),[N,O,t]);return(0,n.BX)("div",{className:"space-y-4 sm:hidden lg:block",children:[(0,n.BX)("div",{className:"flex items-center gap-2",children:[(0,n.tZ)(m.Z,{className:"h-6 w-6 fill-secondary"}),(0,n.tZ)("p",{className:"my-0 text-sm font-semibold text-typo-secondary no-underline sm:text-base",children:f})]}),(0,n.tZ)("div",{className:"relative rounded-md border",children:_?(0,n.tZ)("div",{className:"animate-pulse",children:Array(t).fill(null).map((e,t)=>(0,n.tZ)("div",{className:"border-b p-4 py-3.5 last:border-none",children:(0,n.tZ)("div",{className:"h-4 w-full rounded bg-slate-200"})},t))}):(0,n.BX)(n.HY,{children:["DEFAULT"===b&&A&&!S&&(0,n.tZ)("div",{className:"absolute inset-0 z-10 bg-white/50"}),G.map(e=>(0,n.BX)("div",{onClick:()=>R(e.text),className:"flex cursor-pointer items-center justify-between border-b p-4 py-3 last:border-none hover:bg-gray-50",children:[(0,n.tZ)(u.default,{color:"black",children:e.text}),(0,n.tZ)(r.G,{icon:s._tD,className:"text-neutral-500"})]},e.unique_id))]})}),!!N.length&&N.length>t&&!O&&!_&&(0,n.tZ)(d.Z,{variant:"text",color:"primary",endIcon:(0,n.tZ)(r.G,{icon:i.ptq}),onClick:()=>{null==g||g(),T(!0)},disablePadding:!0,children:"Show more questions"})]})}},3304:function(e,t,a){a.r(t);var n=a(35944),l=a(67294),s=a(5152),i=a.n(s),r=a(55078),o=a(98388),c=a(60503),d=a(56559),u=a(87278),m=a(51048),p=a(94581);let h=i()(()=>a.e(2370).then(a.bind(a,45288)),{loadableGenerated:{webpack:()=>[45288]},ssr:!1}),g=i()(()=>Promise.all([a.e(3512),a.e(505),a.e(9184)]).then(a.bind(a,21333)),{loadableGenerated:{webpack:()=>[21333]},ssr:!1}),f=i()(()=>Promise.all([a.e(4119),a.e(1265),a.e(2818),a.e(8831),a.e(7470)]).then(a.bind(a,88737)),{loadableGenerated:{webpack:()=>[88737]},ssr:!1}),E=i()(()=>a.e(3641).then(a.bind(a,49774)),{loadableGenerated:{webpack:()=>[49774]},ssr:!1}),_=i()(()=>a.e(4314).then(a.bind(a,19265)),{loadableGenerated:{webpack:()=>[19265]},ssr:!1}),N=i()(()=>a.e(347).then(a.bind(a,69260)),{loadableGenerated:{webpack:()=>[69260]}}),v=i()(()=>a.e(347).then(a.bind(a,28984)),{loadableGenerated:{webpack:()=>[28984]}}),S=i()(()=>a.e(6516).then(a.bind(a,70234)),{loadableGenerated:{webpack:()=>[70234]},ssr:!1});t.default=e=>{let{fullscreenRight:t,className:a="",headerProps:s}=e,{variant:i,copilotSize:b,featuresEnabled:C,changeQuestionDrawerOpen:Z,entityType:w}=(0,l.useContext)(u.C),{showNoteSavedSnackbar:y,annotationSidebarType:O,enabled:T}=(0,l.useContext)(c.U),I=C.includes("CITATION"),{accessToCurrentCopilotGPTModel:R,copilotLimit:A,fetchingModels:G,activeCopilotGPTModel:x}=(0,l.useContext)(m.L),{isLoggedIn:L}=(0,l.useContext)(d.Vo),P=G?(0,n.tZ)(p.Z,{}):x&&!R?(0,n.tZ)(N,{}):null,D=null,k="fixed bottom-2 right-2 z-appBar";R&&(D=(0,n.tZ)(r.Z,{onClickAway:()=>{Z(!1)},children:(0,n.BX)("div",{children:[(null==A?void 0:A.has_access)||!L?(0,n.tZ)(n.HY,{children:(0,n.tZ)(f,{})}):(0,n.tZ)(v,{}),I&&(0,n.tZ)(_,{})]})}));let B=(0,n.BX)(n.HY,{children:[O&&T?(0,n.tZ)(S,{}):(0,n.tZ)(h,{header:(0,n.tZ)(g,{title:null==s?void 0:s.title}),footer:D,fixedContent:P}),y&&(0,n.tZ)(E,{})]});return"FLOATING"===i&&t&&"LARGE"===b?(0,n.tZ)("div",{style:{minWidth:"400px",zIndex:1e3},className:(0,o.m6)([k,"h-screen w-2/5 bottom-0",a]),children:B}):"FLOATING"===i&&t?(0,n.tZ)("div",{style:{minWidth:"400px"},className:(0,o.m6)([k,"h-14 w-2/5 flex flex-col justify-end z-13001",a]),children:B}):"FLOATING"===i&&"LARGE"===b?(0,n.tZ)("div",{style:{minWidth:"400px"},className:(0,o.m6)([k,"max-md:h-100dvh h-90vh w-1/4",a]),children:B}):"FLOATING"===i?(0,n.tZ)("div",{style:{minWidth:"400px"},className:(0,o.m6)([k,"w-1/4",a]),children:B}):t?(0,n.tZ)("div",{className:"fixed bottom-2 right-2 z-appBar h-screen w-2/5",style:{minWidth:"400px"},children:B}):(0,n.tZ)("div",{className:(0,o.m6)("h-full w-full",a),style:{minWidth:"400px"},children:B})}},97435:function(e,t,a){a.r(t);var n=a(35944),l=a(67294),s=a(5152),i=a.n(s),r=a(28001);let o=i()(()=>Promise.all([a.e(5913),a.e(991),a.e(1243)]).then(a.bind(a,97206)),{loadableGenerated:{webpack:()=>[97206]},ssr:!1}),c=i()(()=>Promise.all([a.e(5913),a.e(991),a.e(1740)]).then(a.bind(a,21709)),{loadableGenerated:{webpack:()=>[21709]},ssr:!1});t.default=e=>{let{type:t="FLOATING",floatingSplitviewClassname:a}=e,{splitView:s,setSplitView:i,splitViewContent:d}=(0,l.useContext)(r.V);if((0,l.useEffect)(()=>{i(t)},[t]),!d)return null;switch(s){case"FLOATING":return(0,n.tZ)(o,{className:a});case"RESIZABLE":return(0,n.tZ)(c,{});default:return null}}},39434:function(e,t,a){a.d(t,{t:function(){return n}});let n=5},24783:function(e,t){t.Z={RESYNC_COPILOT_RECENT_CONVERSATION_SIDEBAR:"RESYNC_COPILOT_RECENT_CONVERSATION_SIDEBAR",SHOW_CONTEXT_ON_CITATION_SOURCE_DRAWER:"SHOW_CONTEXT_ON_CITATION_SOURCE_DRAWER",SHOW_CONTEXT_ON_CITATION_SOURCE_ACCORDION:"SHOW_CONTEXT_ON_CITATION_SOURCE_ACCORDION",TOGGLE_COPILOT_FULLSCREEN:"TOGGLE_COPILOT_FULLSCREEN"}},79390:function(e,t,a){a.d(t,{L:function(){return u}});var n=a(35944),l=a(67294),s=a(5152),i=a.n(s),r=a(64183),o=a(90717);let c=i()(()=>a.e(3325).then(a.bind(a,74911)),{loadableGenerated:{webpack:()=>[74911]},loading:()=>(0,n.tZ)("div",{className:"flex h-full items-center justify-center",children:(0,n.tZ)(r.Z,{className:"text-2xl"})})}),d=i()(()=>Promise.resolve().then(a.bind(a,46142)),{loadableGenerated:{webpack:()=>[46142]},loading:()=>(0,n.tZ)("div",{className:"flex h-full items-center justify-center",children:(0,n.tZ)(r.Z,{className:"text-2xl"})})}),u=l.createContext({onShowAssets:()=>{}});t.Z=e=>t=>{let[a,s]=(0,l.useState)(null),[i,m]=(0,l.useState)(!1),[p,h]=(0,l.useState)({video:null,slide:null}),g=async e=>{try{m(!0);let t=null,a=null;s(e.selectedAsset),e.assetSlugs.slide&&(t=await o.Z.getSlidesMetaData({slug:e.assetSlugs.slide})),e.assetSlugs.video&&(a=await o.Z.getVideosMetaData({slug:e.assetSlugs.video,config:{getTranscripts:!0,getThumbnail:!0}})),h({slide:t,video:a})}catch(e){console.log("onShowAssets",e)}finally{m(!1)}};return(0,n.BX)(n.HY,{children:[(0,n.tZ)(u.Provider,{value:{onShowAssets:g},children:(0,n.tZ)(e,{...t})}),a&&(0,n.tZ)(d,{content:i?(0,n.tZ)("div",{className:"flex h-full items-center justify-center",children:(0,n.tZ)(r.Z,{className:"text-2xl"})}):(0,n.tZ)(c,{assetType:a,videoAssetMetaData:p.video,slideAssetMetaData:p.slide,showPublishButton:!1}),open:!!a,onClose:()=>{s(null),h({video:null,slide:null})},contentClassName:"top-12 p-0"})]})}},90717:function(e,t,a){var n=a(9669),l=a.n(n),s=a(65829);let i="/api/papers",r=e=>{let t=e.split("-");return t[t.length-2],i};class o{async createSlidesEntry(e){let t="".concat(i,"/").concat(e,"/slides");return(await l().post(t)).data}async getPaperSlideData(e){let t="".concat(i,"/").concat(e,"/slides");return(await l().get(t)).data}async triggerSlidesGeneration(e){let t=r(e),a="".concat(t,"/slides/").concat(e,"/document");return(await l().post(a)).data}async getSlidesMetaData(e){let t=r(e.slug),a="".concat(t,"/slides/").concat(e.slug),n=(0,s.tK)(e.config);return(await l().get(a,{params:n})).data}async getSlidesData(e){let t=r(e),a="".concat(t,"/slides/").concat(e,"/document");return(await l().get(a)).data}async publishSlidesData(e){let t=r(e),a="".concat(t,"/slides/").concat(e);return(await l().patch(a,{is_published:!0})).data}async createVideoEntry(e){let t="".concat(i,"/").concat(e,"/videos");return(await l().post(t)).data}async getPaperVideoData(e){let t="".concat(i,"/").concat(e,"/videos");return(await l().get(t)).data}async triggerFramesGeneration(e){let t=r(e),a="".concat(t,"/videos/").concat(e,"/frames");return(await l().post(a)).data}async getVideosMetaData(e){let t=r(e.slug),a="".concat(t,"/videos/").concat(e.slug),n=(0,s.tK)(e.config);return(await l().get(a,{params:n})).data}async getVideoData(e){let t=r(e),a="".concat(t,"/videos/").concat(e,"/frames");return(await l().get(a)).data}async triggerVideoGeneration(e,t){let a=r(e),n="".concat(a,"/videos/").concat(e,"/generate");return(await l().post(n,{user_avatar_unique_id:t})).data}async getPaperPdfSummaryData(e){let t="".concat(i,"/").concat(e,"/pdf-summary");return(await l().get(t)).data}constructor(){this.createPaperPdfSummaryData=async e=>{let t="".concat(i,"/").concat(e,"/pdf-summary");return(await l().post(t)).data}}}let c=new o;t.Z=c},97297:function(e,t,a){a.d(t,{S:function(){return s}});var n=a(85754),l=a(24783);let s=async e=>{n.Z.emit(l.Z.RESYNC_COPILOT_RECENT_CONVERSATION_SIDEBAR)}},39903:function(e,t,a){a.d(t,{l:function(){return l}});var n=a(19130);let l=async e=>{let{newSize:t}=e;if("LARGE"===t){(0,n._P)("Copilot Window Maximise");return}(0,n._P)("Copilot Window Minimise")}},4549:function(e,t,a){a.d(t,{t:function(){return o}});var n=a(19130),l=()=>{try{if(!localStorage.getItem("user_interacted_with_copilot")&&window.gtag){var e;null===(e=window)||void 0===e||e.gtag("event","user_interacted_with_copilot",{}),localStorage.setItem("user_interacted_with_copilot","true")}}catch(e){console.log("sendFirstUserInteractionEvent",e)}},s=a(11511);let i=e=>{let{options:t}=e,{messageData:a,newMessageOptions:n,parentMessageId:l}=t,{triggerer:s,conversationQuestionType:i}={...n},{selection_type:r,user_prompt_type:o}=a;return s&&"PILL"===s?"Suggestion Pills":s&&"ONBOARDING_FROM_HERO_SECTION"===s?"Suggestion Hero":i&&"GENERIC"===i?"General Suggestion":i&&"CUSTOM"===i?"Brainstorm Suggestion":i&&"DYNAMIC"===i?"Dynamic Suggestion":i&&"FOLLOWUP_QUESTION"===i?"Follow Up Suggestion":i&&"USER_GENERATED"===i&&!l?"Direct":o&&"EXPLAIN"===o?"Explain Text":o&&"SUMMARIZE"===o?"Summarize":o&&"RELATED_PAPERS"===o?"Related Papers":r&&"SNIP"===r?"Snip Math":l?"Follow Up":void 0};var r=a(94853);let o=async e=>{let{entityType:t,options:a,hasPdf:o}=e,{copilotResponse:c,messageData:d,userCurrentPlan:u,copilotSettings:m}=a;if("Copilot couldn't generate the response. Please try again after some time."===c.message){(0,n._P)("Copilot Error",{Location:t,Question:d.message}),l();return}let p=(0,r.HB)(m);(0,n._P)("Copilot Message Sent",{Lang:(0,s.G)(),"Message Tier":"premium"===u?"premium":"basic","Sent From":i(e),Location:t,Question:d.message,hasPdf:o,...p}),l()}},24982:function(e,t,a){a.d(t,{e:function(){return l}});var n=a(19130);let l=async e=>{let{isLoggedIn:t,entity_type:a}=e;return t?((0,n._P)("Copilot Basic Limit Hit",{Location:a}),{showLoginPrompt:!1}):((0,n._P)("Copilot Guest Limit Hit",{Location:a}),{showLoginPrompt:!0})}},35580:function(e,t,a){a.d(t,{D$:function(){return i},_8:function(){return s}});var n=a(28508),l=a(39434);let s=()=>{let e=localStorage.getItem(n.Mm);return e?Number(e):l.t},i=(e,t)=>{localStorage.setItem(e,t)}},14301:function(e,t,a){a.d(t,{Y:function(){return n},n:function(){return l}});let n=e=>sessionStorage.getItem(e),l=(e,t)=>{sessionStorage.setItem(e,t)}}}]);