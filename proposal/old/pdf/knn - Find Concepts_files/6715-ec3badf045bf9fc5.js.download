"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6715],{25688:function(e,t,r){r.d(t,{h:function(){return a}});let a=(e,t)=>{var r,a,n;let{view:l}=e,{$head:i,$from:o}=l.state.selection,s=o.pos,d=(null==i?void 0:i.nodeBefore)?s-(null!==(n=null===(a=i.nodeBefore.text)||void 0===a?void 0:a.substring(null===(r=i.nodeBefore.text)||void 0===r?void 0:r.indexOf(t)).length)&&void 0!==n?n:0):o.start();e.commands.deleteRange({from:d,to:s})}},15249:function(e,t,r){r.d(t,{ZT:function(){return i},cn:function(){return l},pp:function(){return o}});var a=r(90512),n=r(98388);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}let i=e=>{let{from:t,to:r}=e.state.selection;return e.state.doc.textBetween(t,r)},o=e=>{try{let{to:t}=e.state.selection;return e.state.doc.textBetween(0,t)}catch(e){return console.log("getTextAboveCursor",e),""}}},28071:function(e,t,r){r.d(t,{z:function(){return i}});var a=r(35944),n=r(67294),l=r(15249);let i=n.forwardRef((e,t)=>{let{active:r,buttonSize:n="medium",children:i,disabled:o,variant:s="primary",className:d,activeClassname:c,...u}=e,m=(0,l.cn)("flex group items-center justify-center border border-transparent gap-2 text-sm font-semibold rounded-md disabled:opacity-50 whitespace-nowrap","primary"===s&&(0,l.cn)("text-white bg-black border-black",!o&&!r&&"hover:bg-neutral-800 active:bg-neutral-900",r&&(0,l.cn)("bg-neutral-900",c)),"secondary"===s&&(0,l.cn)("text-neutral-900",!o&&!r&&"hover:bg-neutral-100 active:bg-neutral-200",r&&"bg-neutral-200"),"tertiary"===s&&(0,l.cn)("bg-neutral-50 text-neutral-900",!o&&!r&&"hover:bg-neutral-100 active:bg-neutral-200",r&&(0,l.cn)("bg-neutral-200",c)),"ghost"===s&&(0,l.cn)("bg-transparent border-transparent text-neutral-500",!o&&!r&&"hover:bg-black/5 hover:text-neutral-700 active:bg-black/10 active:text-neutral-800",r&&(0,l.cn)("bg-black/10 text-neutral-800",c)),"medium"===n&&"py-2 px-3","small"===n&&"py-1 px-2","icon"===n&&"w-8 h-8","iconSmall"===n&&"w-6 h-6",d);return(0,a.tZ)("button",{ref:t,disabled:o,className:m,...u,children:i})});i.displayName="Button"},25845:function(e,t,r){r.d(t,{P:function(){return i},V:function(){return l}});var a=r(35944);r(67294);var n=r(15249);let l=e=>{let{children:t}=e;return(0,a.tZ)("div",{className:"p-2 text-xs font-semibold text-typo-secondary",children:t})},i=e=>{let{children:t,isActive:r,onClick:l,disabled:i,className:o}=e,s=(0,n.cn)("flex items-center gap-2 p-1.5 text-sm font-medium text-neutral-500 text-left bg-transparent w-full rounded hover:cursor-pointer",!r&&!i,"hover:bg-neutral-100 hover:text-neutral-800",r&&!i&&"bg-neutral-100 text-neutral-800",i&&"text-neutral-400 cursor-not-allowed",o);return(0,a.tZ)("button",{className:s,disabled:i,onClick:l,children:t})}},79757:function(e,t,r){r.d(t,{J:function(){return o}});var a=r(35944),n=r(67294),l=r(56146),i=r(15249);let o=(0,n.memo)(e=>{let{name:t,className:r,strokeWidth:n}=e,o=l[t];return o?(0,a.tZ)(o,{className:(0,i.cn)("w-4 h-4",r),strokeWidth:n||2.5}):null});o.displayName="Icon"},71835:function(e,t,r){r.d(t,{a:function(){return i}});var a=r(35944);r(67294);var n=r(73935);let l=e=>{let{label:t}=e;return(0,a.BX)("div",{className:"flex flex-col items-center justify-center gap-2 rounded-lg bg-black p-4 text-white shadow-2xl",children:[(0,a.BX)("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.tZ)("rect",{className:"animate-spin ease-linear",x:"1",y:"1",rx:"1",width:"10",height:"10",style:{transitionDuration:"1600ms",transitionDelay:"-1600ms"}}),(0,a.tZ)("rect",{className:"animate-spin ease-linear",x:"1",y:"1",rx:"1",width:"10",height:"10",style:{transitionDuration:"1600ms",transitionDelay:"-1600ms"}})]}),t&&(0,a.tZ)("p",{className:"text-sm leading-tight text-white",children:t})]})},i=e=>{let{hasOverlay:t=!0,label:r}=e;return t?(0,n.createPortal)((0,a.tZ)("div",{className:"fixed left-0 top-0 z-1000010 flex h-full w-full select-none items-center justify-center bg-black/60",children:(0,a.tZ)(l,{label:r})}),document.body):(0,a.tZ)(l,{label:r})};t.Z=i},74758:function(e,t,r){r.d(t,{$:function(){return i}});var a=r(35944),n=r(67294),l=r(15249);let i=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e,i=(0,l.cn)("animate-spin rounded-full border-2 border-current border-t-transparent h-4 w-4",r);return(0,a.tZ)("div",{className:i,ref:t,...n})});i.displayName="Spinner"},67084:function(e,t,r){r.d(t,{T:function(){return i}});var a=r(35944),n=r(67294),l=r(15249);let i=(0,n.forwardRef)((e,t)=>{let{children:r,className:n,withShadow:i=!0,withBorder:o=!0,...s}=e,d=(0,l.cn)(n,"bg-white rounded-lg",i?"shadow-sm":"",o?"border border-neutral-200":"");return(0,a.tZ)("div",{className:d,...s,ref:t,children:r})});i.displayName="Surface"},90577:function(e,t,r){r.d(t,{o:function(){return m}});var a=r(35944),n=r(67294),l=r(15249),i=r(28071),o=r(67084),s=r(6765);let d=(0,n.forwardRef)((e,t)=>{let{shouldShowContent:r=!0,children:n,isVertical:i=!1,className:s,...d}=e,c=(0,l.cn)("text-black inline-flex h-full leading-none gap-0.5",i?"flex-col p-2":"flex-row p-1 items-center",s);return r&&(0,a.tZ)(o.T,{className:c,...d,ref:t,children:n})});d.displayName="Toolbar";let c=(0,n.forwardRef)((e,t)=>{let{horizontal:r,className:n,...i}=e,o=(0,l.cn)("bg-neutral-200",r?"w-full min-w-[1.5rem] h-[1px] my-1 first:mt-0 last:mt-0":"h-full min-h-[1.5rem] w-[1px] mx-1 first:ml-0 last:mr-0",n);return(0,a.tZ)("div",{className:o,ref:t,...i})});c.displayName="Toolbar.Divider";let u=(0,n.forwardRef)((e,t)=>{let{children:r,buttonSize:n="icon",variant:o="ghost",className:d,tooltip:c,tooltipShortcut:u,activeClassname:m,...p}=e,h=(0,l.cn)("gap-1 min-w-[2rem] px-2 w-auto",d),f=(0,a.tZ)(i.z,{activeClassname:m,className:h,variant:o,buttonSize:n,ref:t,...p,children:r});return c?(0,a.tZ)(s.Z,{title:c,shortcut:u,children:f}):f});u.displayName="ToolbarButton";let m={Wrapper:d,Divider:c,Button:u}},6765:function(e,t,r){var a=r(35944),n=r(67294),l=r(75537);let i=navigator.platform.toUpperCase().indexOf("MAC")>=0,o=e=>{let{children:t}=e,r="inline-flex items-center justify-center w-5 h-5 p-1 text-[0.625rem] rounded font-semibold leading-none border border-neutral-200 text-neutral-500 border-b-2";return"Mod"===t?(0,a.tZ)("kbd",{className:r,children:i?"⌘":"Ctrl"}):"Shift"===t?(0,a.tZ)("kbd",{className:r,children:"⇧"}):"Alt"===t?(0,a.tZ)("kbd",{className:r,children:i?"⌥":"Alt"}):(0,a.tZ)("kbd",{className:r,children:t})};t.Z=e=>{let{children:t,enabled:r=!0,title:i,shortcut:s,tippyOptions:d={}}=e,c=(0,n.useCallback)(e=>(0,a.BX)("span",{className:"flex items-center gap-2 rounded-lg border border-neutral-100 bg-white px-2.5 py-1 shadow-sm",tabIndex:-1,"data-placement":e["data-placement"],"data-reference-hidden":e["data-reference-hidden"],"data-escaped":e["data-escaped"],style:{zIndex:999},children:[i&&(0,a.tZ)("span",{className:"text-xs font-medium text-neutral-500",children:i}),s&&(0,a.tZ)("span",{className:"flex items-center gap-0.5",children:s.map(e=>(0,a.tZ)(o,{children:e},e))})]}),[s,i]);return r?(0,a.tZ)(l.ZP,{delay:500,offset:[0,8],touch:!1,zIndex:99999,appendTo:document.body,...d,render:c,children:(0,a.tZ)("span",{children:t})}):(0,a.tZ)(a.HY,{children:t})}},91512:function(e,t,r){var a=r(5865),n=r(50502),l=r(25688);let i=a.hj.create({name:"aiGeneration",addOptions:()=>({supportSlashKeyboardShortcut:!1}),addCommands(){return{showAiGeneration:()=>e=>{let{chain:t}=e;return this.storage.visible=!0,t().focus().insertContent(" ").run()},hideAiGeneration:()=>e=>{let{chain:t}=e;return this.storage.visible=!1,t().focus().run()}}},addKeyboardShortcuts(){return{Escape:()=>this.editor.commands.hideAiGeneration(),"/":()=>{if(!this.options.supportSlashKeyboardShortcut)return!1;let{view:e}=this.editor,{$from:t,$anchor:r}=e.state.selection,a=1===t.depth,i="paragraph"===t.parent.type.name,o="slideParagraph"===t.parent.type.name||"frameParagraph"===t.parent.type.name,s=this.editor.isActive("slideItem")||this.editor.isActive("frameItem"),d=this.editor.isActive("keynotes")||this.editor.isActive("narration"),c=this.editor.isActive("column"),u=r.pos===r.end(),m=(a&&i||s&&o||c&&i||d)&&u;return m&&(this.editor.commands.showAiGeneration(),this.editor.chain().focus().insertContent("/").run(),(0,l.h)(this.editor,"/"),(0,n.Z)("NB Format Menu Opened")),m}}},addStorage:()=>({visible:!1})});t.Z=i},65278:function(e,t,r){let a=r(5865).hj.create({name:"aiTransformation",addCommands(){return{showAiTranformation:()=>e=>{let{editor:t}=e;return t.storage[this.name]={visible:!0},!0},hideAiTranformation:()=>e=>{let{editor:t}=e;return t.storage[this.name]={visible:!1},!0}}},addStorage:()=>({visible:!1})});t.Z=a},72463:function(e,t,r){r.d(t,{i:function(){return a}});let a=r(22773).ZP.configure({resizable:!0,lastColumnResizable:!1});t.Z=a},49573:function(e,t,r){r.d(t,{Ax:function(){return d},iH:function(){return h},pj:function(){return f},u:function(){return s},u4:function(){return c},uU:function(){return m},yX:function(){return u}});var a=r(5865),n=r(93);let l=e=>t=>{let r=n.rU.get(t.$anchorCell.node(-1)),a=t.$anchorCell.start(-1),l=r.cellsInRect(e),i=r.cellsInRect(r.rectBetween(t.$anchorCell.pos-a,t.$headCell.pos-a));for(let e=0,t=l.length;e<t;e+=1)if(-1===i.indexOf(l[e]))return!1;return!0},i=e=>(0,a.Kk)(e=>e.type.spec.tableRole&&"table"===e.type.spec.tableRole)(e),o=e=>e instanceof n.Xc,s=e=>t=>!!o(t)&&l({left:e,right:e+1,top:0,bottom:n.rU.get(t.$anchorCell.node(-1)).height})(t),d=e=>t=>!!o(t)&&l({left:0,right:n.rU.get(t.$anchorCell.node(-1)).width,top:e,bottom:e+1})(t),c=e=>{if(o(e)){let t=n.rU.get(e.$anchorCell.node(-1));return l({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},u=e=>t=>{let r=i(t);if(r){let t=n.rU.get(r.node);return(Array.isArray(e)?e:Array.from([e])).reduce((e,a)=>{if(a>=0&&a<=t.width-1){let n=t.cellsInRect({left:a,right:a+1,top:0,bottom:t.height});return e.concat(n.map(e=>{let t=r.node.nodeAt(e),a=e+r.start;return{pos:a,start:a+1,node:t}}))}return e},[])}return null},m=e=>t=>{let r=i(t);if(r){let t=n.rU.get(r.node);return(Array.isArray(e)?e:Array.from([e])).reduce((e,a)=>{if(a>=0&&a<=t.height-1){let n=t.cellsInRect({left:0,right:t.width,top:a,bottom:a+1});return e.concat(n.map(e=>{let t=r.node.nodeAt(e),a=e+r.start;return{pos:a,start:a+1,node:t}}))}return e},[])}return null},p=e=>t=>r=>{let a=i(r.selection),l="row"===e;if(a){let e=n.rU.get(a.node);if(t>=0&&t<(l?e.height:e.width)){let i=l?0:t,o=l?t:0,s=l?e.width:t+1,d=l?t+1:e.height,c=e.cellsInRect({left:i,top:o,right:l?s:i+1,bottom:l?o+1:d}),u=d-o==1?c:e.cellsInRect({left:l?i:s-1,top:l?d-1:o,right:s,bottom:d}),m=a.start+c[0],p=a.start+u[u.length-1],h=r.doc.resolve(m),f=r.doc.resolve(p);return r.setSelection(new n.Xc(f,h))}}return r},h=p("column"),f=p("row")},5389:function(e,t,r){let a;r.d(t,{f5:function(){return em},sU:function(){return S},Ht:function(){return eC.H},dn:function(){return eZ.dn},sg:function(){return ee},oe:function(){return et},ZO:function(){return ea},BB:function(){return X},LI:function(){return G},ty:function(){return Y},Bf:function(){return q},X6:function(){return D},bo:function(){return O},r8:function(){return es},Ur:function(){return ew},rU:function(){return Q},qW:function(){return ex.ZP},Y1:function(){return u},vb:function(){return $},iA:function(){return P.i},pj:function(){return E},xD:function(){return R},bE:function(){return ei},SC:function(){return B},eh:function(){return j}});var n,l,i,o,s=r(5865),d=r(2376),c=r(84348);let u=s.hj.create({name:"selection",addProseMirrorPlugins(){let{editor:e}=this;return[new d.Sy({key:new d.H$("selection"),props:{decorations:t=>t.selection.empty||!0===e.isFocused?null:c.EH.create(t.doc,[c.p.inline(t.selection.from,t.selection.to,{class:"selection"})])}})]}});var m=r(60266),p=r(25934),h=r(35944),f=r(67294),g=r(93133),b=r(91444);(n=i||(i={})).YOUTUBE="youtube",n.INSTAGRAM="instagram",n.TWITTER="twitter",n.FRAMER="framer",n.FIGMA="figma";let v=[{name:"academic",label:"Academic",value:"academic"},{name:"business",label:"Business",value:"business"},{name:"casual",label:"Casual",value:"casual"},{name:"childfriendly",label:"Childfriendly",value:"childfriendly"},{name:"conversational",label:"Conversational",value:"conversational"},{name:"emotional",label:"Emotional",value:"emotional"},{name:"humorous",label:"Humorous",value:"humorous"},{name:"informative",label:"Informative",value:"informative"},{name:"inspirational",label:"Inspirational",value:"inspirational"},{name:"memeify",label:"Memeify",value:"meme"},{name:"narrative",label:"Narrative",value:"narrative"},{name:"objective",label:"Objective",value:"objective"},{name:"persuasive",label:"Persuasive",value:"persuasive"},{name:"poetic",label:"Poetic",value:"poetic"}];var y=r(28071),w=r(25845),x=r(79757),Z=r(71835),C=r(88426),k=r(15249),A=r(67084);let N=(0,f.forwardRef)((e,t)=>{let{asChild:r,className:a,children:n,spacing:l,noShadow:i,...o}=e,s=(0,k.cn)("p-2","small"===l&&"p-[0.2rem]",a),d=r?C.g7:"div";return(0,h.tZ)(d,{ref:t,...o,children:(0,h.tZ)(A.T,{className:s,withShadow:!i,children:n})})});N.displayName="Panel",(0,f.forwardRef)((e,t)=>{let{asChild:r,className:a,children:n,...l}=e,i=(0,k.cn)("border-b border-b-black/10 mb-2 pb-2",a),o=r?C.g7:"div";return(0,h.tZ)(o,{className:i,...l,ref:t,children:n})}).displayName="PanelDivider",(0,f.forwardRef)((e,t)=>{let{asChild:r,className:a,children:n,...l}=e,i=(0,k.cn)("border-b border-b-black/10 text-sm mb-2 pb-2",a),o=r?C.g7:"div";return(0,h.tZ)(o,{className:i,...l,ref:t,children:n})}).displayName="PanelHeader",(0,f.forwardRef)((e,t)=>{let{asChild:r,className:a,children:n,...l}=e,i=(0,k.cn)("mt-4 first:mt-1",a),o=r?C.g7:"div";return(0,h.tZ)(o,{className:i,...l,ref:t,children:n})}).displayName="PanelSection";let T=(0,f.forwardRef)((e,t)=>{let{asChild:r,className:a,children:n,...l}=e,i=(0,k.cn)("text-black/80 text-xs font-medium mb-2 ml-1.5",a),o=r?C.g7:"div";return(0,h.tZ)(o,{className:i,...l,ref:t,children:n})});T.displayName="PanelHeadline",(0,f.forwardRef)((e,t)=>{let{asChild:r,className:a,children:n,...l}=e,i=(0,k.cn)("border-t border-black/10 text-sm mt-2 pt-2",a),o=r?C.g7:"div";return(0,h.tZ)(o,{className:i,...l,ref:t,children:n})}).displayName="PanelFooter";let M=(0,f.forwardRef)((e,t)=>{let{className:r,...a}=e,n=(0,k.cn)("bg-black/5 border-0 rounded-lg caret-black block text-black text-sm font-medium h-[4.5rem] px-2 py-1 w-full","hover:bg-black/10","focus:bg-transparent active:bg-transparent focus:outline focus:outline-black active:outline active:outline-black",r);return(0,h.tZ)("textarea",{className:n,ref:t,...a})});M.displayName="Textarea";var L=r(90577);let H=e=>{let{editor:t,node:r,getPos:a,deleteNode:n}=e,[l,i]=(0,f.useState)({text:"",tone:void 0,textLength:void 0,addHeading:!1,language:void 0}),o=v.find(e=>e.value===l.tone),[s,d]=(0,f.useState)(void 0),[c,u]=(0,f.useState)(!1),C=(0,f.useMemo)(()=>(0,p.Z)(),[]),k=(0,f.useCallback)(async()=>{let{text:e,tone:t,textLength:r,textUnit:a,addHeading:n,language:i}=l;if(!l.text){b.Am.error("Please enter a description");return}u(!0);try{let e="Some random text";if(!e.length){u(!1);return}d(e),u(!1)}catch(t){var o,s;let e=null==t?void 0:null===(s=t.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.error;u(!1),b.Am.error("An error occurred"!==e?"An error has occured: ".concat(e):e)}},[l]),H=(0,f.useCallback)(()=>{let e=a(),n=e+r.nodeSize;t.chain().focus().insertContentAt({from:e,to:n},s).run()},[t,s,a,r.nodeSize]),S=(0,f.useCallback)(()=>{n()},[n]),P=(0,f.useCallback)(e=>{i(t=>({...t,text:e.target.value}))},[]),B=(0,f.useCallback)(()=>{i(e=>({...e,tone:void 0}))},[]),I=(0,f.useCallback)(e=>()=>{i(t=>({...t,tone:e.value}))},[]);return(0,h.tZ)(m.T5,{"data-drag-handle":!0,children:(0,h.tZ)(N,{noShadow:!0,className:"w-full",children:(0,h.BX)("div",{className:"flex flex-col p-1",children:[c&&(0,h.tZ)(Z.a,{label:"AI is now doing its job!"}),s&&(0,h.BX)(h.HY,{children:[(0,h.tZ)(T,{children:"Preview"}),(0,h.tZ)("div",{style:{maxHeight:"14rem"},className:"relative mb-4 ml-2.5 overflow-y-auto border-l-4 border-neutral-100 bg-white px-4 text-base text-black",dangerouslySetInnerHTML:{__html:s}})]}),(0,h.tZ)("div",{className:"flex flex-row items-center justify-between gap-1",children:(0,h.tZ)(T,{asChild:!0,children:(0,h.tZ)("label",{htmlFor:C,children:"Prompt"})})}),(0,h.tZ)(M,{id:C,value:l.text,onChange:P,placeholder:"Tell me what you want me to write about.",required:!0,className:"mb-2"}),(0,h.BX)("div",{className:"flex flex-row items-center justify-between gap-1",children:[(0,h.tZ)("div",{className:"flex w-auto justify-between gap-1",children:(0,h.BX)(g.fC,{children:[(0,h.tZ)(g.xz,{children:(0,h.BX)(y.z,{variant:"tertiary",children:[(0,h.tZ)(x.J,{name:"Mic"}),(null==o?void 0:o.label)||"Change tone",(0,h.tZ)(x.J,{name:"ChevronDown"})]})}),(0,h.tZ)(g.Uv,{children:(0,h.tZ)(g.VY,{side:"bottom",align:"start",asChild:!0,children:(0,h.BX)(A.T,{className:"p-2",style:{minWidth:"12rem"},children:[!!l.tone&&(0,h.BX)(h.HY,{children:[(0,h.tZ)(g.ck,{asChild:!0,children:(0,h.BX)(w.P,{isActive:void 0===l.tone,onClick:B,children:[(0,h.tZ)(x.J,{name:"Undo2"}),"Reset"]})}),(0,h.tZ)(L.o.Divider,{horizontal:!0})]}),v.map(e=>(0,h.tZ)(g.ck,{asChild:!0,children:(0,h.tZ)(w.P,{isActive:e.value===l.tone,onClick:I(e),children:e.label})},e.value))]})})})]})}),(0,h.BX)("div",{className:"flex w-auto justify-between gap-1",children:[s&&(0,h.BX)(y.z,{variant:"ghost",className:"text-red-500 hover:bg-red-500/10 hover:text-red-500",onClick:S,children:[(0,h.tZ)(x.J,{name:"Trash"}),"Discard"]}),s&&(0,h.BX)(y.z,{variant:"ghost",onClick:H,disabled:!s,children:[(0,h.tZ)(x.J,{name:"Check"}),"Insert"]}),(0,h.BX)(y.z,{variant:"primary",onClick:k,style:{whiteSpace:"nowrap"},children:[s?(0,h.tZ)(x.J,{name:"Repeat"}):(0,h.tZ)(x.J,{name:"Sparkles"}),s?"Regenerate":"Generate text"]})]})]})]})})})},S=s.NB.create({name:"aiWriter",group:"block",draggable:!0,addOptions(){return{authorId:void 0,authorName:void 0,enabled:!1,HTMLAttributes:{class:"node-".concat(this.name)}}},addAttributes:()=>({id:{default:void 0,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>({"data-id":e.id})},authorId:{default:void 0,parseHTML:e=>e.getAttribute("data-author-id"),renderHTML:e=>({"data-author-id":e.authorId})},authorName:{default:void 0,parseHTML:e=>e.getAttribute("data-author-name"),renderHTML:e=>({"data-author-name":e.authorName})}}),parseHTML(){return[{tag:"div.node-".concat(this.name)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,s.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setAiWriter:()=>e=>{let{chain:t}=e;return t().focus().insertContent({type:this.name,attrs:{id:(0,p.Z)(),authorId:this.options.authorId,authorName:this.options.authorName}}).run()}}},addNodeView:()=>(0,m.fW)(H)});var P=r(72463);let B=r(33991).Z.extend({allowGapCursor:!1,content:"tableCell*"});var I=r(49573);let E=s.NB.create({name:"tableCell",content:"block+",tableRole:"cell",isolating:!0,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"td"}],renderHTML(e){let{HTMLAttributes:t}=e;return["td",(0,s.P1)(this.options.HTMLAttributes,t),0]},addAttributes:()=>({colspan:{default:1,parseHTML:e=>{let t=e.getAttribute("colspan");return t?parseInt(t,10):1}},rowspan:{default:1,parseHTML:e=>{let t=e.getAttribute("rowspan");return t?parseInt(t,10):1}},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}},style:{default:null}}),addProseMirrorPlugins(){let{isEditable:e}=this.editor;return[new d.Sy({props:{decorations:t=>{if(!e)return c.EH.empty;let{doc:r,selection:a}=t,n=[],l=(0,I.yX)(0)(a);return l&&l.forEach((e,t)=>{let{pos:r}=e;n.push(c.p.widget(r+1,()=>{let e=(0,I.Ax)(t)(a),r="grip-row";e&&(r+=" selected"),0===t&&(r+=" first"),t===l.length-1&&(r+=" last");let n=document.createElement("a");return n.className=r,n.addEventListener("mousedown",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.editor.view.dispatch((0,I.pj)(t)(this.editor.state.tr))}),n}))}),c.EH.create(r,n)}}})]}}),R=r(43626).Z.extend({addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}},style:{default:null}}),addProseMirrorPlugins(){let{isEditable:e}=this.editor;return[new d.Sy({props:{decorations:t=>{if(!e)return c.EH.empty;let{doc:r,selection:a}=t,n=[],l=(0,I.uU)(0)(a);return l&&l.forEach((e,t)=>{let{pos:r}=e;n.push(c.p.widget(r+1,()=>{let e=(0,I.u)(t)(a),r="grip-column";e&&(r+=" selected"),0===t&&(r+=" first"),t===l.length-1&&(r+=" last");let n=document.createElement("a");return n.className=r,n.addEventListener("mousedown",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.editor.view.dispatch((0,I.iH)(t)(this.editor.state.tr))}),n}))}),c.EH.create(r,n)}}})]}}),O=r(25748).Z.extend({renderHTML(){return["div",(0,s.P1)(this.options.HTMLAttributes,{"data-type":this.name}),["hr"]]}}),D=r(7490).Z.extend({renderHTML(e){let{node:t,HTMLAttributes:r}=e,a=parseInt(t.attrs.level,10),n=this.options.levels.includes(a)?a:this.options.levels[0];return["h".concat(n),(0,s.P1)(this.options.HTMLAttributes,r),0]}});s.hj.create({addProseMirrorPlugins:()=>[new d.Sy({props:{transformPastedHTML(e){let t=new DOMParser().parseFromString(e,"text/html").querySelector("[id^=docs-internal-guid-]");return t?(null==t||t.querySelectorAll(":scope > br + br").forEach(e=>{e.replaceWith(document.createElement("p"))}),null==t||t.querySelectorAll(":scope > :not(br) + br").forEach(e=>{e.remove()}),null==t||t.querySelectorAll(":scope a, :scope a *").forEach(e=>{e.removeAttribute("style")}),null==t||t.querySelectorAll("[style]").forEach(e=>{let t=e.style;t.removeProperty("font-size"),t.removeProperty("font-family")}),[{name:"background-color",value:"transparent"},{name:"font-weight",value:"400"},{name:"font-style",value:"normal"},{name:"font-variant",value:"normal"},{name:"text-decoration",value:"none"},{name:"vertical-align",value:"baseline"},{name:"white-space",value:"pre-wrap"},{name:"color",value:"#000000"},{name:"color",value:"rgb(0, 0, 0)"}].forEach(e=>{null==t||t.querySelectorAll('[style*="'.concat(e.name,": ").concat(e.value,'"]')).forEach(t=>{t.style.removeProperty(e.name),t.getAttribute("style")||t.removeAttribute("style")})}),null==t||t.querySelectorAll("span").forEach(e=>{if(!1===e.hasAttributes()){let{parentNode:t}=e;for(;e.firstChild;)null==t||t.insertBefore(e.firstChild,e);null==t||t.removeChild(e)}}),t.innerHTML):e}}})]});let X=r(20336).B.extend({content:"(block|columns)+"});function U(e){let{types:t,node:r}=e;return Array.isArray(t)&&t.includes(r.type)||r.type===t}let j=s.hj.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:["paragraph"]}),addProseMirrorPlugins(){let e=new d.H$(this.name),t=Object.entries(this.editor.schema.nodes).map(e=>{let[,t]=e;return t}).filter(e=>this.options.notAfter.includes(e.name));return[new d.Sy({key:e,appendTransaction:(t,r,a)=>{let{doc:n,tr:l,schema:i}=a,o=e.getState(a),s=n.content.size,d=i.nodes[this.options.node];if(o)return l.insert(s,d.create())},state:{init:(e,r)=>!U({node:r.tr.doc.lastChild,types:t}),apply:(e,r)=>e.docChanged?!U({node:e.doc.lastChild,types:t}):r}})]}});var z=r(16722),J=r(45088),W=r(50502);let F=f.forwardRef((e,t)=>{let r=(0,f.useRef)(null),a=(0,f.useRef)(null),[n,l]=(0,f.useState)(0),[i,o]=(0,f.useState)(0);(0,f.useEffect)(()=>{l(0),o(0)},[e.items]);let s=(0,f.useCallback)((t,r)=>{let a=e.items[t].commands[r];e.command(a)},[e]);f.useImperativeHandle(t,()=>({onKeyDown:t=>{let{event:r}=t;if("ArrowDown"===r.key){if(!e.items.length)return!1;let t=e.items[n].commands,r=i+1,a=n;return t.length-1<r&&(r=0,a=n+1),e.items.length-1<a&&(a=0),o(r),l(a),!0}if("ArrowUp"===r.key){if(!e.items.length)return!1;let t=i-1,r=n;if(t<0){var a;r=n-1,t=(null===(a=e.items[r])||void 0===a?void 0:a.commands.length)-1||0}return r<0&&(r=e.items.length-1,t=e.items[r].commands.length-1),o(t),l(r),!0}return"Enter"===r.key&&!!e.items.length&&-1!==n&&-1!==i&&(s(n,i),!0)}})),(0,f.useEffect)(()=>{if(a.current&&r.current){let e=a.current.offsetTop,t=a.current.offsetHeight;r.current.scrollTop=e-t}},[i,n]);let d=(0,f.useCallback)((e,t)=>()=>{s(e,t)},[s]);return e.items.length?(0,h.tZ)(A.T,{ref:r,className:"mb-8 flex-wrap overflow-auto p-2 text-black",style:{maxHeight:"min(80vh,24rem/* 384px */) !important"},children:(0,h.tZ)("div",{className:"grid grid-cols-1 gap-0.5",children:e.items.map((e,t)=>(0,h.BX)(f.Fragment,{children:[(0,h.tZ)("div",{className:"mb-1 mt-4 select-none text-xs font-semibold tracking-wider text-neutral-500 first:mt-0.5",children:e.title},"".concat(e.title)),e.commands.map((e,r)=>(0,h.BX)(w.P,{isActive:n===t&&i===r,onClick:d(t,r),children:[e.icon,(0,h.tZ)("span",{className:"text-neutral-900",children:e.label})]},"".concat(e.label)))]},"".concat(e.title,"-wrapper")))})}):null});F.displayName="MenuList";let _="slashCommand",$=s.hj.create({name:_,priority:200,addOptions:()=>({settings:{},groups:[]}),onCreate(){a=(0,J.ZP)("body",{interactive:!0,trigger:"manual",placement:"bottom-start",theme:"slash-command",maxWidth:"16rem",offset:[16,8],popperOptions:{modifiers:[{name:"flip",enabled:!1}]}})},addProseMirrorPlugins(){return[(0,z.ZP)({editor:this.editor,char:"/",allowSpaces:!0,startOfLine:!1,allowedPrefixes:null,pluginKey:new d.H$(_),allow:e=>{var t,r;let{state:a,range:n}=e,l=a.doc.resolve(n.from),i=1===l.depth,o="paragraph"===l.parent.type.name,s="slideParagraph"===l.parent.type.name||"frameParagraph"===l.parent.type.name,d=this.editor.isActive("slideItem")||this.editor.isActive("frameItem"),c=this.editor.isActive("keynotes")||this.editor.isActive("narration"),u=this.editor.isActive("column"),m=null===(r=l.parent.textContent)||void 0===r?void 0:r.substring(null===(t=l.parent.textContent)||void 0===t?void 0:t.lastIndexOf("/")),p=!m||"/"===m.trim(),h=(i&&o||d&&s||u&&o||c)&&p;return this.editor.storage[_].visible=h,h},command:e=>{var t,r,a;let{editor:n,props:l}=e,{view:i,state:o}=n,{$head:s,$from:d}=i.state.selection,c=d.pos,u=(null==s?void 0:s.nodeBefore)?c-(null!==(a=null===(r=s.nodeBefore.text)||void 0===r?void 0:r.substring(null===(t=s.nodeBefore.text)||void 0===t?void 0:t.indexOf("/")).length)&&void 0!==a?a:0):d.start(),m=o.tr.deleteRange(u,c);i.dispatch(m),l.action(n),i.focus()},items:e=>{let{query:t}=e,r=this.options.groups.map(e=>({...e,commands:e.commands.filter(e=>{let r=e.label.toLowerCase().trim(),a=t.toLowerCase().trim();if(e.aliases){let t=e.aliases.map(e=>e.toLowerCase().trim());return r.includes(a)||t.includes(a)}return r.includes(a)}).filter(e=>!e.shouldBeHidden||!e.shouldBeHidden(this.editor,{settings:this.options.settings}))})).filter(e=>e.commands.length>0).map(e=>({...e,commands:e.commands.map(e=>({...e,isEnabled:!0}))}));return(this.editor.isActive("keynotes")||this.editor.isActive("narration"))&&(r=r.filter(e=>"ai"===e.name)),r},render:()=>{let e;let t=null,r=this.editor;return{onStart:n=>{var l;e=new m.M_(F,{props:n,editor:n.editor});let{view:i}=n.editor,o=i.dom,s=()=>{if(!n.clientRect)return n.editor.storage[_].rect;let t=n.clientRect();if(!t)return n.editor.storage[_].rect;let r=t.y;if(t.top+e.element.offsetHeight+40>window.innerHeight){let a=t.top+e.element.offsetHeight-window.innerHeight+40;r=t.y-a}return o.getBoundingClientRect().x,new DOMRect(t.x,r,t.width,t.height)};t=()=>{null==a||a[0].setProps({getReferenceClientRect:s})},null===(l=i.dom.parentElement)||void 0===l||l.addEventListener("scroll",t),null==a||a[0].setProps({getReferenceClientRect:s,appendTo:()=>document.body,content:e.element}),null==a||a[0].show(),r.storage[_].visible=!0,(0,W.Z)("NB Format Menu Opened")},onUpdate(t){var r;e.updateProps(t);let{view:n}=t.editor;n.dom;let l=()=>{if(!t.clientRect)return t.editor.storage[_].rect;let e=t.clientRect();return e?new DOMRect(e.x,e.y,e.width,e.height):t.editor.storage[_].rect};null===(r=n.dom.parentElement)||void 0===r||r.addEventListener("scroll",()=>{null==a||a[0].setProps({getReferenceClientRect:l})}),t.editor.storage[_].rect=t.clientRect?l():{width:0,height:0,left:0,top:0,right:0,bottom:0},null==a||a[0].setProps({getReferenceClientRect:l})},onKeyDown(t){var n;return"Escape"===t.event.key?(null==a||a[0].hide(),r.storage[_].visible=!1,!0):((null==a?void 0:a[0].state.isShown)||(null==a||a[0].show(),r.storage[_].visible=!0),null===(n=e.ref)||void 0===n?void 0:n.onKeyDown(t))},onExit(n){if(null==a||a[0].hide(),r.storage[_].visible=!1,t){var l;let{view:e}=n.editor;null===(l=e.dom.parentElement)||void 0===l||l.removeEventListener("scroll",t)}e.destroy()}}}})]},addStorage:()=>({rect:{width:0,height:0,left:0,top:0,right:0,bottom:0},visible:!1,showSlashMenu:!1})});r(23621);let q=s.hj.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:["paragraph"],attributes:{class:{}}},{types:this.options.types,attributes:{fontSize:{parseHTML:e=>e.style.fontSize.replace(/['"]+/g,""),renderHTML:e=>e.fontSize?{style:"font-size: ".concat(e.fontSize)}:{}}}}]},addCommands:()=>({setFontSize:e=>t=>{let{chain:r}=t;return r().setMark("textStyle",{fontSize:e}).run()},unsetFontSize:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}})});s.NB.create({name:"figure",addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"block figcaption",draggable:!0,defining:!0,selectable:!0,parseHTML(){return[{tag:'figure[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:t}=e;return["figure",(0,s.P1)(t,{"data-type":this.name}),0]},addProseMirrorPlugins(){return[new d.Sy({props:{handleDOMEvents:{dragstart:(e,t)=>{if(!t.target)return!1;let r=e.posAtDOM(t.target,0);return e.state.doc.resolve(r).parent.type.name===this.type.name&&t.preventDefault(),!1}}}})]}});let K=e=>{var t;let{node:{attrs:r}}=e,a=null!==(t=r.service)&&void 0!==t?t:void 0,n="w-4 h-4 text-black opacity-50";return(0,h.tZ)(m.T5,{"data-service":a,"data-drag-handle":!0,children:(0,h.BX)("div",{className:"flex cursor-text items-center gap-2 rounded-xl bg-white/40 p-4",children:[!a&&(0,h.tZ)(x.J,{name:"Link",className:n}),"figma"===a&&(0,h.tZ)(x.J,{name:"Figma",className:n}),"framer"===a&&(0,h.tZ)(x.J,{name:"Framer",className:n}),"instagram"===a&&(0,h.tZ)(x.J,{name:"Instagram",className:n}),"twitter"===a&&(0,h.tZ)(x.J,{name:"Twitter",className:n}),"youtube"===a&&(0,h.tZ)(x.J,{name:"Youtube",className:n}),(0,h.tZ)(m.ms,{})]})})},G=s.NB.create({name:"embedInput",group:"block",content:"text*",marks:"",draggable:!0,isolating:!0,addOptions(){return{HTMLAttributes:{class:"node-".concat(this.name)}}},addAttributes:()=>({service:{parseHTML:e=>e.getAttribute("data-service"),renderHTML:e=>({"data-service":e.service})}}),parseHTML(){return[{tag:"div.node-".concat(this.name)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,s.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:e=>{let{editor:t}=e,{state:{selection:{$from:r,$anchor:a}}}=t;return r.parent.type===this.type&&((0,s.Q)(a.parent),t.chain().focus().setNode("paragraph").run(),!0)}}},addCommands(){return{setEmbedInput:e=>{let{service:t}=e;return e=>{let{commands:r}=e;return r.setNode(this.name,{service:t})}}}},addNodeView:()=>(0,m.fW)(K)}),V=r(26761).Ee.extend({group:"block"}),Y=s.NB.create({name:"figcaption",addOptions:()=>({HTMLAttributes:{}}),content:"inline*",selectable:!1,draggable:!1,marks:"link",parseHTML:()=>[{tag:"figcaption"}],addKeyboardShortcuts(){return{Enter:e=>{let{editor:t}=e,{state:{selection:{$from:r,empty:a}}}=t;if(!a||r.parent.type!==this.type||r.parentOffset!==r.parent.nodeSize-2)return!1;let n=t.state.selection.$from.end();return t.chain().focus(n).insertContentAt(n,{type:"paragraph"}).run()},Backspace:e=>{let{editor:t}=e,{state:{selection:{$from:r,empty:a}}}=t;if(!a||r.parent.type!==this.type||0!==r.parentOffset)return!1;let n=t.state.doc.nodeAt(r.pos-2);return(null==n?void 0:n.type.name)===V.name}}},renderHTML(e){let{HTMLAttributes:t}=e;return["figcaption",(0,s.P1)(t),0]}}),Q=r(99404).ZP.extend({inclusive:!1,parseHTML:()=>[{tag:'a[href]:not([data-type="button"]):not([href *= "javascript:" i])'}],renderHTML(e){let{HTMLAttributes:t}=e;return["a",(0,s.P1)(this.options.HTMLAttributes,t,{class:"link"}),0]},addProseMirrorPlugins(){var e;let{editor:t}=this;return[...(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[],new d.Sy({props:{handleKeyDown:(e,r)=>{let{selection:a}=t.state;return"Escape"===r.key&&!0!==a.empty&&t.commands.focus(a.to,{scrollIntoView:!1}),!1}}})]}}),ee=s.NB.create({name:"column",content:"block+",isolating:!0,addAttributes:()=>({position:{default:"",parseHTML:e=>e.getAttribute("data-position"),renderHTML:e=>({"data-position":e.position})}}),renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,s.P1)(t,{"data-type":"column"}),0]},parseHTML:()=>[{tag:'div[data-type="column"]'}]});(l=o||(o={})).SidebarLeft="sidebar-left",l.SidebarRight="sidebar-right",l.TwoColumn="two-column";let et=s.NB.create({name:"columns",group:"columns",content:"column column",defining:!0,isolating:!0,addAttributes:()=>({layout:{default:"two-column"}}),addCommands:()=>({setColumns:()=>e=>{let{commands:t}=e;return t.insertContent('<div data-type="columns"><div data-type="column" data-position="left"><p></p></div><div data-type="column" data-position="right"><p></p></div></div>')},setLayout:e=>t=>{let{commands:r}=t;return r.updateAttributes("columns",{layout:e})}}),renderHTML(e){let{HTMLAttributes:t}=e;return["div",{"data-type":"columns",class:"layout-".concat(t.layout)},0]},parseHTML:()=>[{tag:'div[data-type="columns"]'}]});var er=(e,t)=>{let{view:r,state:{selection:{from:a}}}=e,n=document.querySelectorAll(".has-focus"),l=n.length,i=n[l-1];if(i&&i.getAttribute("data-type")&&i.getAttribute("data-type")===t||i&&i.classList&&i.classList.contains(t))return i;let o=r.domAtPos(a).node,s=o;for(s.tagName||(s=o.parentElement);s&&!(s.getAttribute("data-type")&&s.getAttribute("data-type")===t)&&!s.classList.contains(t);)s=s.parentElement;return s};let ea=e=>{let{editor:t,appendTo:r}=e,a=(0,f.useCallback)(()=>{let e=er(t,"columns");return(null==e?void 0:e.getBoundingClientRect())||new DOMRect(-1e3,-1e3,0,0)},[t]),n=(0,f.useCallback)(()=>t.isActive("columns"),[t]),l=(0,f.useCallback)(()=>{t.chain().focus().setLayout(o.SidebarLeft).run()},[t]),i=(0,f.useCallback)(()=>{t.chain().focus().setLayout(o.SidebarRight).run()},[t]),s=(0,f.useCallback)(()=>{t.chain().focus().setLayout(o.TwoColumn).run()},[t]);return(0,h.tZ)(m.NM,{editor:t,pluginKey:"columnsMenu-".concat((0,p.Z)()),shouldShow:n,updateDelay:0,tippyOptions:{offset:[0,8],popperOptions:{modifiers:[{name:"flip",enabled:!1}]},getReferenceClientRect:a,appendTo:()=>null==r?void 0:r.current,plugins:[J.CA],sticky:"popper"},children:(0,h.BX)(L.o.Wrapper,{children:[(0,h.tZ)(L.o.Button,{tooltip:"Sidebar left",active:t.isActive("columns",{layout:o.SidebarLeft}),onClick:l,children:(0,h.tZ)(x.J,{name:"PanelLeft"})}),(0,h.tZ)(L.o.Button,{tooltip:"Two columns",active:t.isActive("columns",{layout:o.TwoColumn}),onClick:s,children:(0,h.tZ)(x.J,{name:"Columns"})}),(0,h.tZ)(L.o.Button,{tooltip:"Sidebar right",active:t.isActive("columns",{layout:o.SidebarRight}),onClick:i,children:(0,h.tZ)(x.J,{name:"PanelRight"})})]})})},en=(0,f.memo)(e=>{var t;let{editor:r,onItemClick:a}=e,[n,l]=(0,f.useState)(null);return(0,f.useEffect)(()=>{let e=e=>{let{editor:t}=e;l({...t.extensionStorage.tableOfContent})};return e({editor:r}),r.on("update",e),r.on("selectionUpdate",e),()=>{r.off("update",e),r.off("selectionUpdate",e)}},[r]),(0,h.BX)(h.HY,{children:[(0,h.tZ)("div",{className:"mb-2 text-xs font-semibold uppercase text-neutral-500",children:"Table of contents"}),n&&(null===(t=n.content)||void 0===t?void 0:t.length)>0?(0,h.tZ)("div",{className:"flex flex-col gap-1",children:n.content.map(e=>(0,h.BX)("a",{href:"#".concat(e.id),style:{marginLeft:"".concat(1*e.level-1,"rem")},onClick:a,className:(0,k.cn)("block font-medium text-neutral-500 p-1 rounded bg-opacity-10 text-sm hover:text-neutral-800 transition-all hover:bg-black hover:bg-opacity-5 truncate w-full",e.isActive&&"text-neutral-800 bg-neutral-100"),children:[e.itemIndex,". ",e.textContent]},e.id))}):(0,h.tZ)("div",{className:"text-sm text-neutral-500",children:"Start adding headlines to your document …"})]})});en.displayName="TableOfContents";let el=e=>{let{editor:t}=e;return(0,h.tZ)(m.T5,{children:(0,h.tZ)("div",{className:"-m-2 rounded-lg p-2",contentEditable:!1,children:(0,h.tZ)(en,{editor:t})})})},ei=s.NB.create({name:"tableOfContentNode",group:"block",atom:!0,selectable:!0,draggable:!0,inline:!1,parseHTML:()=>[{tag:'div[data-type="table-of-content"]'}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",{...t,"data-type":"table-of-content"}]},addNodeView:()=>(0,m.fW)(el),addCommands(){return{insertTableOfContent:()=>e=>{let{commands:t}=e;return t.insertContent({type:this.name})}}}}),eo=e=>{let{editor:t,getPos:r,node:a}=e,n=(0,f.useRef)(null),{src:l}=a.attrs,i=(0,k.cn)("left"===a.attrs.align?"ml-0":"ml-auto","right"===a.attrs.align?"mr-0":"mr-auto","center"===a.attrs.align&&"mx-auto"),o=(0,f.useCallback)(()=>{t.commands.setNodeSelection(r())},[r,t.commands]);return(0,h.tZ)(m.T5,{children:(0,h.tZ)("div",{className:i,style:{width:a.attrs.width},children:(0,h.tZ)("div",{contentEditable:!1,ref:n,children:(0,h.tZ)("img",{className:"block",src:l,alt:"",onClick:o})})})})},es=V.extend({name:"imageBlock",group:"block",defining:!0,isolating:!0,addAttributes:()=>({src:{default:"",parseHTML:e=>e.getAttribute("src"),renderHTML:e=>({src:e.src})},width:{default:"100%",parseHTML:e=>e.getAttribute("data-width"),renderHTML:e=>({"data-width":e.width})},align:{default:"center",parseHTML:e=>e.getAttribute("data-align"),renderHTML:e=>({"data-align":e.align})},alt:{default:void 0,parseHTML:e=>e.getAttribute("alt"),renderHTML:e=>({alt:e.alt})}}),parseHTML:()=>[{tag:'img[src*="tiptap.dev"]:not([src^="data:"]), img[src*="windows.net"]:not([src^="data:"])'}],renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,s.P1)(this.options.HTMLAttributes,t)]},addCommands:()=>({setImageBlock:e=>t=>{let{commands:r}=t;return r.insertContent({type:"imageBlock",attrs:{src:e.src}})},setImageBlockAt:e=>t=>{let{commands:r}=t;return r.insertContentAt(e.pos,{type:"imageBlock",attrs:{src:e.src}})},setImageBlockAlign:e=>t=>{let{commands:r}=t;return r.updateAttributes("imageBlock",{align:e})},setImageBlockWidth:e=>t=>{let{commands:r}=t;return r.updateAttributes("imageBlock",{width:"".concat(Math.max(0,Math.min(100,e)),"%")})}}),addNodeView:()=>(0,m.fW)(eo)});var ed=r(83454);let ec=[{name:"photorealistic",label:"Photorealistic",value:"photorealistic"},{name:"digital-art",label:"Digital art",value:"digital_art"},{name:"comic-book",label:"Comic book",value:"comic_book"},{name:"neon-punk",label:"Neon punk",value:"neon_punk"},{name:"isometric",label:"Isometric",value:"isometric"},{name:"line-art",label:"Line art",value:"line_art"},{name:"3d-model",label:"3D model",value:"3d_model"}],eu=e=>{let{editor:t,node:r,getPos:a,deleteNode:n}=e,[l,i]=(0,f.useState)({text:"",imageStyle:void 0}),o=ec.find(e=>e.value===l.imageStyle),[s,d]=(0,f.useState)(void 0),[c,u]=(0,f.useState)(!1),v=(0,f.useMemo)(()=>(0,p.Z)(),[]),C=(0,f.useCallback)(async()=>{if(!l.text){b.Am.error("Please enter a description for the image");return}u(!0);let e={text:l.text,style:l.imageStyle};try{let t=await fetch("".concat(ed.env.NEXT_PUBLIC_TIPTAP_AI_BASE_URL,"/image/prompt")||0,{method:"POST",headers:{accept:"application.json","Content-Type":"application/json"},body:JSON.stringify(e)}),r=(await t.json()).response;if(!r.length)return;d(r),u(!1)}catch(a){var t,r;let e=null==a?void 0:null===(r=a.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error;u(!1),b.Am.error("An error occurred"!==e?"An error has occured: ".concat(e):e)}},[l]),k=(0,f.useCallback)(()=>{(null==s?void 0:s.length)&&(t.chain().insertContent('<img src="'.concat(s,'" alt="" />')).deleteRange({from:a(),to:a()}).focus().run(),u(!1))},[t,s,a]),H=(0,f.useCallback)(()=>{n()},[n]),S=(0,f.useCallback)(e=>i(t=>({...t,text:e.target.value})),[]),P=(0,f.useCallback)(()=>{i(e=>({...e,imageStyle:void 0})),d(void 0)},[]),B=(0,f.useCallback)(e=>()=>i(t=>({...t,imageStyle:e.value})),[]);return(0,h.tZ)(m.T5,{"data-drag-handle":!0,children:(0,h.tZ)(N,{noShadow:!0,className:"w-full",children:(0,h.BX)("div",{className:"flex flex-col p-1",children:[c&&(0,h.tZ)(Z.Z,{label:"AI is now doing its job!"}),s&&(0,h.BX)(h.HY,{children:[(0,h.tZ)(T,{children:"Preview"}),(0,h.tZ)("div",{className:"mb-4 aspect-square w-full rounded border border-black bg-white bg-contain bg-center bg-no-repeat",style:{backgroundImage:"url(".concat(s,")")}})]}),(0,h.tZ)("div",{className:"flex items-center justify-between gap-2",children:(0,h.tZ)(T,{asChild:!0,children:(0,h.tZ)("label",{htmlFor:v,children:"Prompt"})})}),(0,h.tZ)(M,{id:v,value:l.text,onChange:S,placeholder:"Describe the image that you want me to generate.",required:!0,className:"mb-2"}),(0,h.BX)("div",{className:"flex flex-row items-center justify-between gap-1",children:[(0,h.tZ)("div",{className:"flex w-auto justify-between gap-1",children:(0,h.BX)(g.fC,{children:[(0,h.tZ)(g.xz,{asChild:!0,children:(0,h.BX)(y.z,{variant:"tertiary",children:[(0,h.tZ)(x.J,{name:"Image"}),(null==o?void 0:o.label)||"Image style",(0,h.tZ)(x.J,{name:"ChevronDown"})]})}),(0,h.tZ)(g.Uv,{children:(0,h.tZ)(g.VY,{side:"bottom",align:"start",asChild:!0,children:(0,h.BX)(A.T,{className:"p-2",style:{minWidth:"192 px"},children:[!!l.imageStyle&&(0,h.BX)(h.HY,{children:[(0,h.BX)(w.P,{isActive:void 0===l.imageStyle,onClick:P,children:[(0,h.tZ)(x.J,{name:"Undo2"}),"Reset"]}),(0,h.tZ)(L.o.Divider,{horizontal:!0})]}),ec.map(e=>(0,h.tZ)(w.P,{isActive:e.value===l.imageStyle,onClick:B(e),children:e.label},e.value))]})})})]})}),(0,h.BX)("div",{className:"flex flex-row items-center justify-between gap-1",children:[s&&(0,h.BX)(y.z,{variant:"ghost",className:"text-red-500 hover:bg-red-500/10 hover:text-red-500",onClick:H,children:[(0,h.tZ)(x.J,{name:"Trash"}),"Discard"]}),s&&(0,h.BX)(y.z,{variant:"ghost",onClick:k,children:[(0,h.tZ)(x.J,{name:"Check"}),"Insert"]}),(0,h.BX)(y.z,{variant:"primary",onClick:C,children:[s?(0,h.tZ)(x.J,{name:"Repeat"}):(0,h.tZ)(x.J,{name:"Sparkles"}),s?"Regenerate":"Generate image"]})]})]})]})})})},em=s.NB.create({name:"aiImage",group:"block",draggable:!0,addOptions(){return{authorId:void 0,authorName:void 0,enabled:!1,HTMLAttributes:{class:"node-".concat(this.name)}}},addAttributes:()=>({id:{default:void 0,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>({"data-id":e.id})},authorId:{default:void 0,parseHTML:e=>e.getAttribute("data-author-id"),renderHTML:e=>({"data-author-id":e.authorId})},authorName:{default:void 0,parseHTML:e=>e.getAttribute("data-author-name"),renderHTML:e=>({"data-author-name":e.authorName})}}),parseHTML(){return[{tag:"div.node-".concat(this.name)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,s.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setAiImage:()=>e=>{let{chain:t}=e;return t().focus().insertContent({type:this.name,attrs:{id:(0,p.Z)(),authorId:this.options.authorId,authorName:this.options.authorName}}).run()}}},addNodeView:()=>(0,m.fW)(eu)});var ep=r(74758);class eh{}eh.uploadImage=async()=>(await new Promise(e=>setTimeout(e,500)),"/placeholder-image.jpg");let ef=e=>{let{onUpload:t}=e,[r,a]=(0,f.useState)(!1);return{loading:r,uploadFile:(0,f.useCallback)(async()=>{a(!0);try{let e=await eh.uploadImage();t(e)}catch(a){var e,r;let t=(null==a?void 0:null===(r=a.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Something went wrong";b.Am.error(t)}a(!1)},[t])}},eg=()=>{let e=(0,f.useRef)(null),t=(0,f.useCallback)(()=>{var t;null===(t=e.current)||void 0===t||t.click()},[]);return{ref:e,handleUploadClick:t}},eb=e=>{let{uploader:t}=e,[r,a]=(0,f.useState)(!1),[n,l]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let e=()=>{a(!0)},t=()=>{a(!1)};return document.body.addEventListener("dragstart",e),document.body.addEventListener("dragend",t),()=>{document.body.removeEventListener("dragstart",e),document.body.removeEventListener("dragend",t)}},[]),{isDragging:r,draggedInside:n,onDragEnter:()=>{l(!0)},onDragLeave:()=>{l(!1)},onDrop:(0,f.useCallback)(e=>{if(l(!1),0===e.dataTransfer.files.length)return;let r=e.dataTransfer.files,a=[];for(let e=0;e<r.length;e+=1){let t=r.item(e);t&&a.push(t)}if(a.some(e=>-1===e.type.indexOf("image")))return;e.preventDefault();let n=a.filter(e=>-1!==e.type.indexOf("image")),i=n.length>0?n[0]:void 0;i&&t(i)},[t])}},ev=e=>{let{onUpload:t}=e,{loading:r,uploadFile:a}=ef({onUpload:t}),{handleUploadClick:n,ref:l}=eg(),{draggedInside:i,onDrop:o,onDragEnter:s,onDragLeave:d}=eb({uploader:a}),c=(0,f.useCallback)(e=>e.target.files?a(e.target.files[0]):null,[a]);if(r)return(0,h.tZ)("div",{className:"flex items-center justify-center rounded-lg bg-transparent/80 p-8",style:{minHeight:"10rem"},children:(0,h.tZ)(ep.$,{className:"text-neutral-500",size:1.5})});let u=(0,k.cn)("flex flex-col items-center justify-center px-8 py-10 rounded-lg bg-opacity-80",i&&"bg-neutral-100");return(0,h.BX)("div",{className:u,onDrop:o,onDragOver:s,onDragLeave:d,contentEditable:!1,children:[(0,h.tZ)(x.J,{name:"Image",className:"mb-4 h-12 w-12 text-black opacity-20"}),(0,h.BX)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,h.tZ)("div",{className:"text-center text-sm font-medium text-neutral-400",children:i?"Drop image here":"Drag and drop or"}),(0,h.tZ)("div",{children:(0,h.BX)(y.z,{disabled:i,onClick:n,variant:"primary",buttonSize:"small",children:[(0,h.tZ)(x.J,{name:"Upload"}),"Upload an image"]})})]}),(0,h.tZ)("input",{className:"h-0 w-0 overflow-hidden opacity-0",ref:l,type:"file",accept:".jpg,.jpeg,.png,.webp,.gif",onChange:c})]})},ey=e=>{let{getPos:t,editor:r}=e,a=(0,f.useCallback)(e=>{e&&r.chain().setImageBlock({src:e}).deleteRange({from:t(),to:t()}).focus().run()},[t,r]);return(0,h.tZ)(m.T5,{children:(0,h.tZ)("div",{className:"m-0 p-0","data-drag-handle":!0,children:(0,h.tZ)(ev,{onUpload:a})})})},ew=s.NB.create({name:"imageUpload",isolating:!0,defining:!0,group:"block",draggable:!0,selectable:!0,inline:!1,parseHTML(){return[{tag:'div[data-type="'.concat(this.name,'"]')}]},renderHTML(){return["div",{"data-type":this.name}]},addCommands(){return{setImageUpload:()=>e=>{let{commands:t}=e;return t.insertContent('<div data-type="'.concat(this.name,'"></div>'))}}},addNodeView:()=>(0,m.fW)(ey)});var ex=r(21198);r(32084),r(51358),r(93237),r(18151),r(41705),r(87605),r(63354),r(96279),r(90214),r(48510),r(75575);var eZ=r(83416),eC=r(88776);r(73397),r(22608)},49876:function(e,t,r){var a=r(9669),n=r.n(a);let l="/api/asset";class i{async getImagePresignedUrl(e){return(await n().post("".concat(l,"/image/presigned-url"),e,{withCredentials:!0})).data}async getPdfPresignedUrl(e){return(await n().post("".concat(l,"/pdf/presigned-url"),e,{withCredentials:!0})).data}async getAIDetectorPdfPresignedUrl(e){return(await n().post("".concat(l,"/ai-detector/pdf/presigned-url"),e,{withCredentials:!0})).data}async getUserAvatarMediaUploadSignedUrl(e){return(await n().post("".concat(l,"/user-avatar/presigned-url"),e,{withCredentials:!0})).data}async getVideosFrameImageUploadSignedUrl(e){return(await n().post("".concat(l,"/videos/frame/image/presigned-url"),e,{withCredentials:!0})).data}async getPaperPdfPresignedUrl(e){return(await n().post("".concat(l,"/paper-pdf/presigned-url"),e)).data}}let o=new i;t.Z=o},36646:function(e,t,r){r.d(t,{O:function(){return a}});let a=async(e,t)=>{try{let r=new FormData;return Object.keys(t.fields).forEach(e=>{r.append(e,t.fields[e])}),r.append("file",e),fetch(t.url,{method:"POST",body:r})}catch(e){console.log("uploadFileToS3 Upload",e)}}}}]);