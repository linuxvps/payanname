"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1369],{44866:function(e,t,a){a.d(t,{Z:function(){return N}});var l=a(35944),r=a(67294),n=a(68779),o=a(73582),i=a(67814),c=a(56559),s=a(33405),d=a(60115),u=a(64183),h=a(31878),m=e=>{let{collectionList:t,isLoading:a,onChange:r,onNew:n}=e,c=null,m=(0,l.BX)(s.Z,{fullWidth:!t.length,onClick:n,className:"whitespace-nowrap",children:[(0,l.tZ)(i.G,{icon:o.r8p,size:"lg",color:"primary"}),"New collection"]});return c=a?(0,l.tZ)("div",{className:"flex items-center justify-center p-4",children:(0,l.tZ)(u.Z,{className:"animate-spin text-primary",size:"2x"})}):t.length?(0,l.BX)("div",{className:"grid w-full grid-cols-1 items-start space-y-3 pt-4",children:[(0,l.BX)("div",{className:"flex flex-col px-4",children:[(0,l.tZ)(h.default,{size:"large",variant:"heading",color:"primary",children:"Collections"}),(0,l.tZ)(h.default,{children:"Select where to save or remove from"})]}),(0,l.tZ)("div",{className:"grid max-h-44 grid-cols-1 space-y-4 overflow-y-auto px-4 pb-4",children:t.map(e=>(0,l.tZ)(d.Z,{id:e.full_slug,label:e.name,checked:e.is_entity_bookmarked,onChange:t=>{null==r||r(e.full_slug,t)},disabled:e.disabled,containerClassName:"hover:bg-inherit",checkboxClassName:"border-typo-primary border-2 aria-checked:bg-success-500",className:"py-0"},e.full_slug))}),(0,l.tZ)("div",{className:"!mt-0",children:(0,l.tZ)("div",{className:"border-0 border-t border-solid border-t-borderColor-light1 px-2 py-1",children:m})})]}):(0,l.BX)("div",{className:"flex flex-col items-center justify-center space-y-2 p-4",children:[(0,l.tZ)(i.G,{size:"3x",className:"text-typo-disabled",icon:o.wK3}),(0,l.tZ)(h.default,{size:"medium",className:"font-semibold",children:"Nothing here!"}),(0,l.tZ)(h.default,{className:"text-center",children:"Create a new collection and start saving papers in it to refer back to them later"}),m]}),(0,l.tZ)("div",{className:"w-72",children:c})},p=a(46121),f=e=>{let{isLoading:t,onCreate:a,onClose:o}=e,[c,d]=(0,r.useState)(""),u=()=>{c&&(null==a||a(c))};return(0,l.BX)("div",{className:"flex w-72 flex-col gap-4 p-4",children:[(0,l.BX)("div",{className:"flex flex-col gap-2",children:[(0,l.BX)("div",{className:"flex items-center gap-3",children:[(0,l.tZ)(i.G,{icon:n.acZ,className:"cursor-pointer",onClick:o}),(0,l.tZ)(h.default,{variant:"heading",size:"large",children:"New Collection"})]}),(0,l.tZ)(h.default,{children:"Give a name to your new collection"})]}),(0,l.tZ)(p.Z,{placeholder:"Eg: Nature Papers",value:c,onChange:e=>{var t,a,l;(null===(a=e.target)||void 0===a?void 0:null===(t=a.value)||void 0===t?void 0:t.length)>200||d(null===(l=e.target)||void 0===l?void 0:l.value)},onKeyDown:e=>{("Enter"===e.key||13===e.keyCode)&&c&&u()}}),(0,l.tZ)(s.Z,{isLoading:t,variant:"contained",color:"primary",onClick:u,children:"Create"})]})},v=a(57909),b=a(9669),g=a.n(b);let y="/api/bookmark";class Z{constructor(){this.fetchCollections=async(e,t)=>(await g().get("".concat(y),{params:{entity_type:e,entity_slug:t}})).data,this.bookmark=async(e,t,a,l)=>(await g().patch("".concat(y),{collection_slug:a,entity_slug:t,entity_type:e,should_bookmark:l})).data,this.createCollection=async(e,t,a)=>(await g().post("".concat(y),{collection_name:e,entity_type:t,entity_slug:a})).data}}let w=new Z;var x=a(19130),N=e=>{let{variant:t,entity:a,entity_slug:d,onClick:u,onClose:h,is_bookmarked:p,Location:b,page:g,paperTitle:y,paperIdx:Z,hasPdf:N}=e,{isLoggedIn:k,setAuthType:C}=(0,r.useContext)(c.Vo),[_,B]=(0,r.useState)(!1),[S,P]=(0,r.useState)(!1),[X,z]=(0,r.useState)(!1),[E,G]=(0,r.useState)([]),[L,I]=(0,r.useState)(!!p),K={Location:b,page:g,paperTitle:y,paperIndex:Z,hasPdf:N};(0,r.useEffect)(()=>{I(!!p)},[p]);let V=async e=>{try{P(!0);let t=await w.createCollection(e,a,d);(0,x._P)("Library New Folder Created",{folderName:e,page:g}),(0,x._P)("Paper Bookmark Saved",K),G(e=>[t,...e]),I(!0),z(!1)}catch(e){console.log(e)}finally{P(!1)}},j=async(e,t)=>{try{P(!0);let a=await w.fetchCollections(e,t);G(a.data)}catch(e){console.log(e)}finally{P(!1)}},R=async(e,t)=>{try{var l,r,n;let o=null,i=null;o=E.slice(),i=E.findIndex(t=>t.full_slug===e),-1!==i&&(o[i].disabled=!0),G(o),t?(0,x._P)("Paper Bookmark Saved",K):(0,x._P)("Library Entity Deleted",{entityType:"PAPER"}),await w.bookmark(a,d,e,t),o=E.slice(),i=E.findIndex(t=>t.full_slug===e),-1!==i&&(o[i].is_entity_bookmarked=t,o[i].disabled=!1),G(o),I(o.some(e=>e.is_entity_bookmarked)),t&&(null===(l=window)||void 0===l?void 0:l.gtag)&&(null===(n=window)||void 0===n||null===(r=n.gtag)||void 0===r||r.call(n,"event","saved_in_library",{entity:a,addition_type:"BOOKMARK"}))}catch(e){console.log(e)}},A=()=>{if(null==u||u(),!k){null==C||C("auth_signup");return}B(!0),j(a,d)},D=null;switch(t){case"icon":D=(0,l.tZ)(s.Z,{color:"dark",className:"rounded hover:bg-neutral-50",startIcon:(0,l.tZ)(i.G,{icon:L?o.xVw:n.xVw,className:L?"text-red-700":""}),onClick:A});break;case"button":case"outlinedButton":D=(0,l.tZ)(s.Z,{size:"sm",color:"dark",variant:"outlinedButton"===t?"outlined":void 0,className:"rounded hover:bg-neutral-50",startIcon:(0,l.tZ)(i.G,{icon:L?o.xVw:n.xVw,className:L?"text-red-700":"text-primary"}),onClick:A,children:L?"Saved":"Save"})}return(0,l.tZ)("div",{className:"relative",children:(0,l.tZ)(v.default,{open:_,onClose:()=>{B(!1),null==h||h()},className:"z-1300",content:(0,l.tZ)("div",{className:"bg-white shadow-md",children:X?(0,l.tZ)(f,{isLoading:S,onCreate:V,onClose:()=>z(!1)}):(0,l.tZ)(m,{collectionList:E,isLoading:S,onNew:()=>z(!0),onChange:R})}),children:D})})}},60115:function(e,t,a){var l=a(35944);a(67294);var r=a(73582),n=a(67814),o=a(46069),i=a(98388);t.Z=e=>{let{id:t,onChange:a,label:c,checked:s,checkboxClassName:d,disabled:u=!1,className:h="",containerClassName:m=""}=e;return(0,l.BX)("div",{className:(0,i.m6)("flex w-full items-center pl-2  hover:bg-neutral-10",u?"pointer-events-none opacity-50":"hover:cursor-pointer ",m),children:[(0,l.tZ)(o.fC,{className:(0,i.m6)("flex h-4 w-4 appearance-none items-center justify-center rounded-sm border-2  bg-white hover:cursor-pointer aria-checked:border-0 aria-checked:bg-primary aria-checked:text-white",d),checked:s,onCheckedChange:e=>{null==a||a(e)},id:t,disabled:u,children:(0,l.tZ)(o.z$,{children:(0,l.tZ)(n.G,{icon:r.LEp})})}),c&&(0,l.tZ)("label",{className:(0,i.m6)("w-full overflow-auto text-ellipsis p-2 text-sm hover:cursor-pointer",h),htmlFor:t,children:(0,l.tZ)("div",{className:"line-clamp-1",children:c})})]})}},46121:function(e,t,a){var l=a(35944),r=a(67294),n=a(98388);let o=(0,r.forwardRef)((e,t)=>{let{className:a,dataElement:r,helperText:o,error:i,...c}=e;return(0,l.BX)("div",{className:"w-full",children:[(0,l.tZ)("input",{className:(0,n.m6)("w-full rounded-md bg-white h-10 border disabled:pointer-events-none hover:border-neutral-400 p-2 px-3 font-sans text-base outline-none focus:border-primary-400 focus:ring-1 focus:ring-primary-400 placeholder:text-typo-gray placeholder:font-light",i&&"border-error-500",a),ref:t,...r?{"data-element":r}:null,...c}),o&&i&&(0,l.tZ)("p",{className:"my-1 text-sm text-error-500",children:o})]})});t.Z=o},18877:function(e,t,a){a.d(t,{J:function(){return r},K:function(){return n}});var l=a(35944);let r=e=>{let{className:t=""}=e;return(0,l.tZ)("span",{className:"bull-separator mx-1 my-auto break-all text-xs font-black ".concat(t),children:"â€¢"})},n=e=>{let{className:t=""}=e;return(0,l.tZ)("span",{className:"dash-separator mx-1 my-auto break-all font-black ".concat(t),children:"-"})}},26564:function(e,t,a){a.d(t,{m:function(){return i}});var l=a(35944),r=a(67294),n=a(5152);let o=a.n(n)()(()=>Promise.all([a.e(3512),a.e(3228)]).then(a.bind(a,31074)),{loadableGenerated:{webpack:()=>[31074]},ssr:!1}),i=r.createContext({setCiteContent:()=>{}});t.Z=e=>t=>{let[a,n]=(0,r.useState)(null);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(i.Provider,{value:{setCiteContent:e=>{n(e)}},children:(0,l.tZ)(e,{...t})}),!!a&&(0,l.tZ)(o,{paper:a,onClose:()=>n(null)})]})}}}]);